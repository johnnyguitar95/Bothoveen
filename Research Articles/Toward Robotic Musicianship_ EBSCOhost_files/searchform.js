(function(b){b(function(){ep.require(["ep/jqueryplugins/bididirfixer.js","ep/jqueryplugins/text-clear.js"],function(){var a=b("Form"),o=b('#SearchTerm1, input[id^="Searchbox"]'),n=8,l=10;var j=function(e){var c=ep.searchInfoDetails||null,d=[],f={};if(c){o.each(function(){d.push(b(this).val())});_.each(c.details,function(g){var h=_.indexOf(d,g.term);if(h>-1){f["f"+h]={type:c.type,details:_.omit(g,"term")}}});if(!_.isEmpty(f)){a.append("<input type='hidden' name='searchInfoDetails' value='"+JSON.stringify(f)+"'/>")}}if(e===""){e=b("#SearchButton").data("formsubmit").action}if(e){a.attr("action",e);a.submit();return false}};setTimeout(function(){b(".basic, .advanced").find("#SearchTerm1, #Searchbox1").focus()},10);o.attr("accesskey","2");function k(){try{o.bidiDirFixer();if(o.data("textclearinstance")){o.textClear("setPosition")}}catch(c){if(--n){setTimeout(k,l);l*=2}}}k();b("[data-formsubmit]").on("click",function(c){var d=b(this).data("formsubmit").action;return j(d)}).addClass("rs_preserve");var m=(b.browser.msie)?"keydown paste change":"keyup change";var p=(b.browser.msie)?50:1;o.on(m,function(c){var d=this;if(b.browser.msie&&parseInt(b.browser.version,10)<9){if(c.keyCode===13){var e=b("[data-formsubmit]").data("formsubmit").action;return j(e)}}setTimeout(function(){b(d).bidiDirFixer();if(b(d).data("textclearinstance")){b(d).textClear("setPosition")}},p);return true});b("[data-formreset]").on("click",function(c){if(b(this).is("[type=submit]")){var d=b("#ResetButton").data("formreset").action;if(d){a.attr("action",d);a.submit();return false}}}).addClass("rs_preserve");b("#ClearButton").on("click",function(){var c=ep.utilities.buildAjaxRequestPath("Search/Clear");b.ajax({type:"post",url:c});var e=b("#findFieldOuter");var d=e.find("[data-clear]");e.find("[data-remove]").remove();d.each(function(g,h){var f=b(h).data("clear");if(b(h).is("[type=text]")){b(h).attr("value",f).trigger("change")}if(b(h).is("textarea")){b(h).attr("value",f).trigger("change")}if(b(h).is("[type=radio]")){if(f==="checked"){b(h).prop("checked",f)}}if(b(h).is("[data-dropdown]")){b(h).find('input[type="radio"]').first().click()}if(b(h).is("[type=checkbox]")){if(f==="checked"){b(h).attr("checked",f)}else{b(h).removeAttr("checked")}}if(b("#runSmartTextSearchingPopup").length){b(".ui-icon").trigger("click")}});o.first().focus()}).addClass("rs_preserve")})})})(jQuery);