(function(d,e){var f={placeholderSelector:"div.rs-placeholder",accentMappings:{ScanSoft_Daniel_Full_22kHz:"en_uk",ScanSoft_Jill_Full_22kHz:"en_us",ScanSoft_Karen_Full_22kHz:"en_au"},encodeFileName:function(i){if(i.length!==1){return""}var b=i.attr("data-text-to-speech-title").replace(/(([^\s]+\s\s*){5})(.*)/,"$1").replace(/ +$/,""),c=i.attr("data-text-to-speech-author"),j=""+i.attr("data-text-to-speech-additional-filename"),a=(b+(c.length>0?"-"+c:"")+(j.length>0?"-"+j:"")).replace(/[^\w\-]/g,"");return encodeURIComponent(a)},setupFullTextDiv:function(b){var a=d(".full-text-container"),c="rs_full_text_container_title";if(a.length===1){a.find(".ft-title").addClass("textToSpeechDataContainer");a.attr("id",a.id?a.id:c);b=a.attr("id")}return b},setup:function(){var b=d(this.placeholderSelector),a=d(".record-type.audio-link");if(b.length>0&&a.length===0){b.each(function(){var s=d(this),c,v,y,z,r,B,w,x,t=d("#"+s.data("parent"));if(e.interfaceId&&e.interfaceId==="ell"){t=d(b[0])}if(t.length>0){c=s.data("readid");c=f.setupFullTextDiv(c);y=s.data("server");z=s.data("speed").toLowerCase();r=f.accentMappings[s.data("voice")]||"en_us";B=(s.data("download")||false)&&d("div.full-text-container").length>0;x=s.data("isdetail");w=f.encodeFileName(d("section#TextToSpeech"));d(":hidden,.submenu,.hidden,iframe").addClass("rs_skip");if(d("#"+c).length===0){c=d("div#innerContainer").attr("id")}window.rsConf||(window.rsConf={});window.rsConf.speed=z;window.rsConf.lang=r;window.rsConf.download=B;var A=e.baseImagePath+"javascript/texttospeech/ReadSpeaker.js?pids=embhl&skin=EBSCO";var u=document.createElement("script");u.type="text/javascript";u.src=A;document.body.appendChild(u);v=d('<div id="readspeaker_button" class="rs_skip rsbtn_ebsco rs_preserve" style="display:block;"><a class="rsbtn_play" id="readspeaker_link" accesskey="L" href="'+y+"&amp;lang="+r+"&amp;readid="+c+"&amp;url="+encodeURIComponent(window.location.href)+"&amp;speedValue="+z+"&amp;download="+B+(w.length>0?"&audiofilename="+w:"")+'"><span class="rsbtn_left rsimg rspart"><span class="rsbtn_text"><span>Listen</span></span></span><span class="rsbtn_right rsimg rsplay rspart"></span></a></div>');t.append(v).show();e.logDownload=function(){d.ajax({url:e.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioDownload")})};if(x===true){e.logAudioPlayback=function(){d.ajax({url:e.utilities.buildAjaxRequestPath("TextToSpeech/LogAudioReading")})}}}})}}};d(document).ready(function(){var a=(navigator.appVersion.indexOf("MSIE")!==-1)?true:false;var b=(a)?800:200;f.setup();setTimeout(function(){if(d(".rs-flash-link").length>0){d(".readspeakerContainer").addClass("noflash")}},b)});if(typeof define==="function"&&define.amd){define("epreadspeaker",[],function(){return f})}}(jQuery,ep));