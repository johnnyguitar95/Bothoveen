(function(B,r){if(!r){throw"selectdb.js: ep is undefined"}var t,z,x,w,F,D;function E(){var b=z,a;while(b--){a=B(t[b]);if(a[0].checked===false){return true}}return false}function s(){var b=z,a;while(b--){a=B(t[b]);if(a[0].checked===true){return true}}return false}function A(b){var a=b.data("listItem");if(a.length){a[b[0].checked?"addClass":"removeClass"]("selected")}}function G(){x[0].checked=true;x.title=D;w.show()}function u(){x[0].checked=false;x.title=F;w.hide()}function C(){var b=B(this);var c=B(t).closest('input[value="'+b[0].value+'"]').not("#"+b.id);if(c.length){for(var a=0;a<c.length;a++){c[a].checked=b.is(":checked");A(c)}}if(b.is(":checked")){if(E()){u()}else{G()}}else{u()}A(b)}function y(){if(!s()){var a=B("#selectDbError").show().attr("tabIndex","-1");setTimeout(B.proxy(function(){this.focus()},a),500);return false}return true}function H(){var b=z;while(b--){var a=B(t[b]);if(!a[0].disabled){a[0].checked=x[0].checked}A(a)}if(x[0].checked){G()}else{u()}}function v(c,a){F=c;D=a;x=B("#selectAllDbs :checkbox");t=B("#dbList :checkbox, #trialDbList :checkbox");z=t.length;w=B("#allDbsWarn");var d=z,b;B(x).click(H);while(d--){b=B(t[d]).click(C);b.data("listItem",b.closest("li"));A(b)}if(E()){u()}else{G()}}r.selectDb={init:v,updateAll:H,validate:y}})(jQuery,ep);