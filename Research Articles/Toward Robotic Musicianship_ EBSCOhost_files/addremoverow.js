(function(i){function h(){g()}function g(){i("#guided-find-fields").on("click","#AddRow",function(){j()});i("#guided-find-fields").on("click","#RemoveRow",function(){f()})}function j(){var x=i("#AddRow").data("count");var E=x.maxCount;var D=x.minCount;var d=i("#guidedfindfieldRows > li").length;if(!i("#AddRow").hasClass("disabled")){if(d<E){var w=i("#guidedfindfieldRows > li").last();var b=w.clone();b.find("input[type=text]").val("");b.find("input[type=hidden]").val(d+1);var B=b.find('[data-add-remove="inputOp"]'),A=b.find('[data-add-remove="labelOp"]');B.each(function(k){i(this).attr({id:"Op_"+(d+1)+"_"+_.last(i(this).attr("id").split("_")+"_"+k),name:"GuidedSearchFormData["+(d+1)+"].Op"})});A.each(function(k){i(this).attr({"for":"Op_"+(d+1)+"_"+_.last(i(this).attr("for").split("_")+"_"+k)})});b.find("input[type=text]").attr("name","GuidedSearchFormData["+(d+1)+"].SearchTerm");var C=b.find("input[type=text]").attr("id","Searchbox"+(d+1));var y=b.find("[data-searchTextBox]");if(y.length>0){b.find("input[type=text]").attr("data-searchtextbox",'{"AutoSuggestMapId":"Searchbox'+(d+1)+'"}')}b.find("label:last").attr("for","Op_"+(d+1));var e=b.find('[data-add-remove="inputDb"]'),v=b.find('[data-add-remove="labelDb"]');e.each(function(k){i(this).attr({name:"GuidedSearchFormData["+(d+1)+"].DbTag",id:"DbTag_"+(d+1)+"_"+k})});v.each(function(k){i(this).attr({"for":"DbTag_"+(d+1)+"_"+k})});C.bidiDirFixer();var c=(i.browser.msie)?"keydown paste":"keyup";var z=(i.browser.msie)?50:1;C.on(c,function(k){var l=this;setTimeout(function(){i(l).bidiDirFixer()},z);return true});b.find("select:first option:first-child").attr("selected","selected");i("#guidedfindfieldRows").append(b);b.find("[data-dropdown]").dropdown();e.first().click();if(y.length>0){var F=i("#Searchbox"+(d+1)),a=F.closest(".find-field-controls").data("autoComplete");F.epautocomplete({data:a})}d=i("#guidedfindfieldRows > li").length;if(d>D){i("#RemoveRow").removeClass("disabled")}if(d===E){i("#AddRow").removeClass().addClass("disabled")}}}}function f(){var c=i("#RemoveRow").data("count");var b=c.maxCount;var a=c.minCount;var d=i("#guidedfindfieldRows > li").length;if(!i("#RemoveRow").hasClass("disabled")){if(d>a){i("#guidedfindfieldRows > li").last().remove();d=i("#guidedfindfieldRows > li").length;if(d<b){i("#AddRow").removeClass("disabled")}if(d===a){i("#RemoveRow").addClass("disabled")}}}}i(h)})(jQuery);