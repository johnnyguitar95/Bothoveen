var ep = window.ep || {}; ep.bundles = ep.bundles || []; ep.bundles = ep.bundles.concat('bundled/_layout2/master.js','ep/lib/pt-bones.js', 'ep/common/common.js', 'ep/jqueryplugins/absolutize.js', 'ep/modaldialog.js', 'ep/widgets/uidialog.js', 'ep/widgets/epmodal.js', 'ep/widgets/eppopup.js', 'ep/widgets/dropdown.js', 'ep/epdialog.js', 'ep/common/customevents.js', 'ep/common/displayutilities.js', 'ep/common/keyevent.js', 'ep/controller/control/simplemenu.js', 'ep/common/popupwin.js', 'ep/utilities.js', 'ep/extension/number.js', 'ep/updatefolder.js', 'ep/ep.js', 'ep/util/globalloader.js', 'ep/util/jtemplateparser.js', 'ep/util/json.js', 'json2/json2.js', 'ep/util/iframe.js', 'ep/base/controller.js', 'ep/base/pagecontroller.js', 'ep/base/modulecontroller.js', 'ep/manager/clientstatemanager.js', 'ep/util/expandcollapse.js', 'ep/controller/collapsiblecontroller.js', 'ep/controller/control/optionscontrolsdropdowns.js', 'jqueryplaceholder/jquery.placeholder.js', 'jqueryplaceholder/placeholder.js', 'ep/jqueryplugins/xdr.js', 'ep/jqueryplugins/corsfallback.js', 'ep/util/formsubmit.js', 'ep/util/xpathevaluatorfallback.js', 'ep/util/googletagmanagerloader.js', 'ep/util/url.js', 'ep/controller/control/customerlogo.js', 'jquery/plugins/jquery.validate-1.9.0.js', 'ep/jqueryplugins/jqueryvalidate_ep.js', 'ep/jqueryplugins/whitespace.js');
(function(){var d=Array.prototype.slice;var f=(function(){function a(g,n){var h=g.length,m=n.length;while(m--){g[h+m]=n[m]}return g}function b(g,h){g=d.call(g,0);return a(g,h)}function c(g){if(arguments.length<2&&(typeof arguments[0])==="undefined"){return this}var l=this,h=d.call(arguments,1);return function(){var k=b(h,arguments);return l.apply(g,k)}}function j(g){var h=this;return function(){var l=a([h.pt_bind(this)],arguments);return g.apply(this,l)}}function i(){var g=this.toString().match(/^[\s\(]*function[^(]*\(([^)]*)\)/)[1].replace(/\/\/.*?[\r\n]|\/\*(?:.|[\r\n])*?\*\//g,"").replace(/\s+/g,"").split(",");return g.length===1&&!g[0]?[]:g}return{pt_bind:c,argumentNames:i,wrap:j}})();for(var e in f){if(f.hasOwnProperty(e)){Function.prototype[e]=f[e]}}})();var Class=(function(){var o=(function(){for(var a in {toString:1}){if(a==="toString"){return false}}return true})();function j(){}function i(){var a=null,b=Array.prototype.slice.call(arguments);if(typeof b[0]==="function"){a=b.shift()}function d(){this.initialize.apply(this,arguments)}d.addMethods=Class.Methods.addMethods;d.superclass=a;d.subclasses=[];if(a){j.prototype=a.prototype;d.prototype=new j();a.subclasses.push(d)}for(var c=0,e=b.length;c<e;c++){d.addMethods(b[c])}if(!d.prototype.initialize){d.prototype.initialize=Class.emptyFunction}d.prototype.constructor=d;return d}function p(h){var e=this.superclass&&this.superclass.prototype,d=(function(r){if(!r||(typeof r!=="object")){return}var u=[];for(var q in r){if(r.hasOwnProperty(q)){u.push(q)}}return u})(h);if(o){if(h.toString!==Object.prototype.toString){d.push("toString")}if(h.valueOf!==Object.prototype.valueOf){d.push("valueOf")}}function b(r,q){return function(){return r[q].apply(this,arguments)}}for(var f=0,g=d.length;f<g;f++){var a=d[f],c=h[a];if(e&&typeof c==="function"&&c.argumentNames()[0]==="$super"){var s=c;c=b(e,a).wrap(s);c.valueOf=m(s.valueOf,s);c.toString=m(s.toString,s)}this.prototype[a]=c}return this}var n=Array.prototype.slice;function k(a,d){var b=a.length,c=d.length;while(c--){a[b+c]=d[c]}return a}function l(a,b){a=n.call(a,0);return k(a,b)}function m(a,b){if(arguments.length<2&&(typeof arguments[0]==="undefined")){return a}var d=a,c=n.call(arguments,1);return function(){var e=l(c,arguments);return d.apply(b,e)}}return{create:i,emptyFunction:function(){return},Methods:{addMethods:p}}})();(function(){function e(b,a){if(!(a=a.split("="))[0]){return}var h=decodeURIComponent(a.shift()),c=a.length>1?a.join("="):a[0];if(c!==undefined){c=decodeURIComponent(c)}if(h in b){if(Object.prototype.toString.call(b[h])!=="[object Array]"){b[h]=[b[h]]}b[h].push(c)}else{b[h]=c}return b}var d=(function(){function a(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}function c(i){var n=this.strip().match(/([^?#]*)(#.*)?$/),l={},m=0;if(!n){return{}}n=n[1].split(i||"&");m=n.length;while(m--){l=e(l,n[m])}return l}function b(h){return this.length>h?this.substr(0,h-1)+"&hellip;":this}return{toQueryParams:c,strip:a,truncate:b}})();for(var f in d){if(d.hasOwnProperty(f)){String.prototype[f]=d[f]}}})();if(!window.ep){ep=function(){return{version:1}}()}if(!ep.messages){ep.messages={}}ep.InternetExplorerVersion=function(){var d=null;var c=navigator.appVersion.match(/MSIE ([\d\.]+)/);if(c){d=parseFloat(c[1])}return d}();ep.ie6SelectFix=function(b){if(ep.InternetExplorerVersion!==6){return}if(!ep.selects||!ep.selects.length){ep.selects=jQuery("select")}if(b){ep.selects.removeClass("hide")}else{ep.selects.addClass("hide")}};var debug_mode=false;function getXmlHttpObject(){var b=null;if(window.XMLHttpRequest){b=new XMLHttpRequest()}else{if(window.ActiveXObject){b=new ActiveXObject("Microsoft.XMLHTTP");if(!b){b=new ActiveXObject("Msxml2.XMLHTTP")}}}return b}ep.isAjaxEnabled=function(){var h=false;if(document.forms.length>0){var g=getXmlHttpObject();h=g?true:false;var e=h?"enabled":"disabled";var f=document.createElement("input");f.type="hidden";f.id="ajax";f.name="ajax";f.value=e;if(document.forms.length>0){document.forms[0].appendChild(f)}}return h}();function errorHandler(){if(debug_mode){var b="ERROR: "+arguments[0];b+=arguments[1]?"\nURL: "+arguments[1]:"";b+=arguments[2]?"\nLINE: "+arguments[2]:"";alert(b)}}if(debug_mode){window.onerror=errorHandler}function getClientId(e,d){var f=null;if(e&&e!==""){if(e.indexOf(d)>-1){f=e.split(d)[e.split(d).length-1]}else{f=e}}return f}var getElementByClientId=function(c,d){return jQuery(d).find('[id$="_'+c+'"]')[0]};function getPostBackForm(){return document.forms[0]}function getElementById(c){var d=document.getElementById(c);if(!d){d=getElementByClientId(c,(typeof(theForm)!=="undefined"&&theForm)?theForm:getPostBackForm())}return d}ep.getScreenResolution=function(){var b=document.getElementById("__ScreenResolution");if(b){b.value=screen.width+" : "+screen.height}};function getPostBackPage(f,d){var e=(f.action.length>0)?f.action:window.location.pathname+window.location.search;if(d){return((e.indexOf("?")>0)?e.split("?")[0]:e)}else{return(e)}}function getFormActionParams(c,d){return((c.action.indexOf("?")>0)?d+c.action.split("?")[1]:"")}function getPageName(b){if(!b){return""}else{if(b.indexOf("?")>-1){return b.substring(0,b.indexOf("?"))}else{return b}}}function getUpdatedFormAction(c,d){return getPageName(d)+getFormActionParams(c,"?")}function getFormActionWithUpdatedVID(g,f,e){var h=getFormActionParams(g,"");if(/^\d+$/.test(e)){h=h.replace(/vid=\d+/i,"vid="+e)}return(h!=="")?getPageName(f)+"?"+h:f}function stopCurrentEvent(b){if(b){b.returnValue=false;if(b.cancelable){b.preventDefault()}}}function closePopup(f){var d=getElementByClientId("messageBox",getPostBackForm());if(d){d.style.visibility="hidden"}var e=document.getElementById("coverScreen");if(e){e.style.visibility="hidden"}if(typeof(aAjaxCallBack)!=="undefined"){if(aAjaxCallBack&&aAjaxCallBack.redirect&&aAjaxCallBack.redirect!==""&&!aAjaxCallBack.autoRedirect){aAjaxCallBack.redirectToPage(aAjaxCallBack.redirect)}}stopCurrentEvent(f)}function ClearTarget(){var b=document.getElementById("target");if(b){b.parentNode.removeChild(b)}return true}ep.isPageRTL=function(){var b=/RTL/i;return(document.documentElement.dir.match(b)||_.isFunction(jQuery("</div>").bidi))};ep.togglePanel=function(m,j,q){var o=q==="openOnly"?true:false;var l=q==="closeOnly"?true:false;var r=jQuery("#"+j);if(!r.length){r=jQuery(getElementByClientId(j,getPostBackForm()))}var k=jQuery("#"+m);if(!k.length){k=jQuery(getElementByClientId(m,getPostBackForm()))}var p=m.indexOf("left")>0?"Left":"Right";var n=jQuery(getElementByClientId(p.toLowerCase()+"PanelState",getPostBackForm()));if(r.length&&k.length){if(r.hasClass("panels"+p+"Open")&&!o){r.removeClass("panels"+p+"Open");r.addClass("panels"+p+"Closed");k.title=ep.messages["show"+p+"Panel"];if(n.length){n.val("hidden")}}else{if(r.hasClass("panels"+p+"Closed")&&!l){r.removeClass("panels"+p+"Closed");r.addClass("panels"+p+"Open");k.title=ep.messages["hide"+p+"Panel"];if(n.length){n.val("visible")}}}}};ep.hidePanel=function(c,d){ep.togglePanel(c,d,"closeOnly")};ep.showPanel=function(c,d){ep.togglePanel(c,d,"openOnly")};function Mid(i,h,f){if(h<0||f<0){return""}var j,g=String(i).length;if(h+f>g){j=g}else{j=h+f}return String(i).substring(h,j)}function onInputBoxKeyPress(c){var d=c?c:window.event;return onkeypress_event(d,"SearchButton")}ep.updateSearchMode=function(){var v=jQuery(),w,r=jQuery(),o,s,u=jQuery(),x,t,B;var p=null;var q=false;function A(){if(!s){s=true;var a=jQuery();var b=jQuery("#searchModeList");a=jQuery("#SearchTerm1, #Searchbox1");var e=jQuery("#FirstFindFieldIdHolder");if(a.length===0){if(e.length){a=jQuery("#"+e.val())}if(!a.length){return}}q=a.is("[data-textclear]");p=a.data("textclear");if(b.length){v=b.find("input[type='radio']");v.bind("click",ep.updateSearchMode)}if(a.is("INPUT")){r=a}else{if(a.is("TEXTAREA")){u=a}}if(jQuery("#DbTag_1").length){x=jQuery("#DbTag_1, #LabelDbTag_1")}else{var c=jQuery("#FirstFindFieldTagIdHolder").val();var d=jQuery("#FirstFindFieldInLabelHolder").val();x=jQuery("#"+c+", #"+d)}e=jQuery("#FirstFindFieldRowMeasure");if(e.length){w=jQuery("#"+e.val()).width()}else{w=a.width()}o=a.parent();t=true}}function y(){if(!u.length){u=jQuery("<textarea/>").attr({id:r.attr("id"),name:r.attr("name"),"class":r.attr("class"),placeholder:r.attr("placeholder"),"data-clear":"",rows:6,accesskey:2}).width(w).removeClass("placeholder").keypress(onInputBoxKeyPress);if(q){u.attr("data-textclear",r.attr("data-textclear"))}}x.hide();if(r.length){u.html(r.val());var a=false;if(r.data("textclearinstance")){a=true;r.textClear("destroy")}r.replaceWith(u);if(a){u.textClear()}u.removeClass("placeholder").placeholder();u.trigger("ep_searchModeUpdated")}}function z(){if(!r.length){r=jQuery("<input/>").attr({id:u.attr("id"),name:u.attr("name"),accesskey:2,size:x.length>0?28:53,"class":u.attr("class"),placeholder:u.attr("placeholder")}).removeClass("placeholder").keypress(onInputBoxKeyPress);if(q){r.attr("data-textclear",u.attr("data-textclear"))}if(x.length===0){r.width(w)}}if(!r.parent().length&&u.length){var a=false;if(u.data("textclearinstance")){a=true;u.textClear("destroy")}u.replaceWith(r);if(a){r.textClear()}r.removeClass("placeholder").placeholder();x.show();r.trigger("ep_searchModeUpdated")}}return function(){A();if(t!==true){return}var a;if(v.length){a=v.filter(":checked").val()}else{var b=jQuery("#CurrentSearchMode");if(b.length){a=b.val()}}if(a==="Smart"){y()}else{if(B==="Smart"){z()}}B=a}}();ep.showAllDbs=function(){var d=jQuery("#showAllLink"),c=jQuery("#extendedDatabases, #showLessLink");if(d.length){d.hide()}if(c.length){c.css("display","inline")}};ep.showLessDbs=function(){var c=jQuery("#showAllLink"),d=jQuery("#extendedDatabases, #showLessLink");if(c.length){c.show()}if(d.length){d.hide()}};function showHistoryTerm(m,n){var k=document.getElementById(m);var i=n?k:null;var l=n?null:k;var p=k.parentNode;while(p&&p.tagName.toUpperCase()!=="TD"){p=p.parentNode}if(p){var j=getElementByClientId("fullterm",p);var o=getElementByClientId("truncterm",p);if(n){l=getElementByClientId("showless",p);j.style.display=l.style.display="inline";i.style.display=o.style.display="none"}else{i=getElementByClientId("ellipsis",p);j.style.display=l.style.display="none";o.style.display=i.style.display="inline"}}}function runAJAX(c,d){aFormAction=document.forms[0].action.toString().replace(/(\/*)[\w\d]*?(\?)/,"$1"+c+"$2");jQuery.ajax({type:"post",url:aFormAction,data:d})}function GoToArticle(b){window.location.href=ep.SyncFormVid(b)}ep.SyncFormVid=function(g){var h=/vid=(\d+)/.exec(g);if(h&&h.length===2){var f=parseInt(h[1],10);var j=document.getElementById("__vid");if(j&&/^\d+$/.test(j.value)){var i=parseInt(j.value,10);if(i===f+1){g=g.replace("vid="+f,"vid="+i)}}}return g};ep.toggleThemes=function(l,g,i,h){var j=l.split(",");var k=jQuery("#"+j[0]).hasClass("hidden-theme")?h:i;jQuery("#"+g).text(k).attr("title",k);_.each(j,function(a){jQuery("#"+a).toggleClass("hidden-theme")});return false};ep.URLEncode=function(b){b=encodeURIComponent(b);b=b.replace(/\+/g,"%2B");return b};ep.URLDecode=function(b){b=b.replace(/\+/g," ");b=decodeURIComponent(b);return b};ep.getUrlParam=function(f){var h=[],i;var g=window.location.search.slice(1).split("&");for(var j=0;j<g.length;j++){if(g[j].length>0){i=g[j].split("=");h.push(i[0]);h[i[0]]=i[1]}}return h[f]};ep.buildHostURL=function(){var b=window.location.protocol+"//"+window.location.host+window.location.pathname+"?vid="+ep.getUrlParam("vid")+"&sid="+ep.getUrlParam("sid");return b};String.prototype.startsWith=function(b){return this.length>=b.length&&this.substr(0,b.length)===b};String.prototype.endsWith=function(b){return this.length>=b.length&&this.substr(this.length-b.length)===b};String.prototype.parseQuery=function(){var n=this.indexOf("?");var i=this.indexOf("#");var m=this;if(n>0){m=this.substring(n+1,i>0?i:this.length)}var k={};var l=m.split("&");for(var h=0;h<l.length;h++){var j=l[h].split("=");k[decodeURIComponent(j[0])]=decodeURIComponent(j[1])}return k};(function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(h,g){for(var e=(g||0),f=this.length;e<f;e++){if(this[e]===h){return e}}return -1}}})();ep.require("jquery/plugins/jquery.ba-resize.js",function(){$(document).ready(function(){var j=$("body"),g={},h,f=$("body"),i=function(a,b){$(a).parentsUntil("html").css("height",b+"px")};if(j.hasClass("limited-scope")&&window.top!==window.self){if(j.hasClass("viewer")||j.hasClass("archive")||j.hasClass("ResponsiveEbook")||j.hasClass("ebook")){g.pixelHeight="sticky"}else{if($("#innerContainer").length){f=$("#innerContainer");h=f.height();g.pixelHeight=h;$(".custom-widget").each(function(d,c){var a=$(this).height(),b;$(this).resize(function(e){var l=$(this).height();b=l-a;if(b){a=l;g.pixelHeight=h+b;window.parent.postMessage(JSON.stringify(g),"*");i(f,g.pixelHeight);h+=b}})});$(document).resize(function(a){if($(document).height()>$(window).height()){g.pixelHeight=$(document).height();window.parent.postMessage(JSON.stringify(g),"*");i(f,g.pixelHeight)}})}else{g.pixelHeight=$(document).outerHeight(true)}}window.parent.postMessage(JSON.stringify(g),"*");if(g.pixelHeight!=="sticky"){i(f,g.pixelHeight);$("body").css({"overflow-y":"hidden"})}}})});jQuery.fn.absolutize=function(){return this.each(function(){var g=jQuery(this);if(g.css("position")==="absolute"){return g}var k=g.offset();var i=k.top;var j=k.left;var l=g[0].clientWidth;var h=g[0].clientHeight;g._originalLeft=j-parseFloat(g.css("left")||0);g._originalTop=i-parseFloat(g.css("top")||0);g._originalWidth=g.css("width");g._originalHeight=g.css("height");g.css("position","absolute");g.css("top",i+"px");g.css("left",j+"px");g.css("width",l+"px");g.css("height",h+"px");return g})};(function(b){if(!ep.dialog){ep.dialog=function(){return{version:1}}()}ep.dialog.ModalDialog=Class.create({content:"",initialize:function(e,a){e=b(e);if(ep.dialog.HoverPopup){ep.dialog.HoverPopup.hideHover()}if(e.length){var f=b.proxy(this.show,this);b(e).click(function(){f();return false});this.$trigger=e}else{this.$trigger=b([])}if(a){_.extend(this,a)}},initDisplay:function(){var j=document.body.appendChild(b("<div waiRole='dialog'>").get(0));j.className="modal-dialog";if(this.cssClass){b(j).addClass(this.cssClass)}b(j).css({display:"none"});var l=b("<span tabIndex='0' class='ui-icon ui-icon-closethick'><span>Close</span></span>");b(j).append(l);l.on("click",b.proxy(this.hide,this));var k=b.proxy(function(c){this.handleCloseKeyPress(c)},this);l.on("keydown",k);var h=b("<div class='modal-content'>");b(j).append(h);var a=b("<span tabIndex='0' class='modal-tab-end'>").html(" ");b(j).append(a);var i=b.proxy(function(){this.display.container.firstChild.focus()},this);a.on("focus",i);this.display={container:j,closeElement:l.get(0),contentElement:h.get(0)}},show:function(){if(!this.previousAspForm&&window.theForm){this.previousAspForm=theForm}if(!this.display){this.initDisplay()}this.displayLoadDialog();if(!this.$coverScreen){this.$coverScreen=b("#modal-screen")}if(!this.$coverScreen.is(":visible")){this.layoutScreen();this.$coverScreen.fadeTo("normal",0.5)}if(this.content){this.render()}else{if(this.command&&!this.href){var e=window.location.href.replace(/\/\w+\?/,"/"+this.command+"?");e=e.split("#")[0];var f=document.getElementById("__vid").value;if(f){e=e.replace(/vid=\d+/,"vid="+f)}this.href=e}if(this.href){var a=b.proxy(function(c){this.render(c)},this);b.ajax(this.href,{type:"get",success:function(c){a(c)},error:function(){a("We're sorry, an error occurred.")}})}else{this.render("An error has occurred and there is nothing to display")}}},render:function(d){b(this.$loadDialog).stop(true,true).fadeOut("normal");if(d){var a=d.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(a){this.content=a[1]}else{this.content=d}}b(this.display.contentElement).html(this.content);this.layout();b(this.display.container).fadeIn("normal",b.proxy(this.renderComplete,this));this.childForms=b(this.display.contentElement).find("form");if(window.theForm&&this.childForms.length>0){window.theForm=this.childForms.get(0)}this.childForms.each(b.proxy(function(f,c){c.dialog=this;if(_.isFunction(this.onSubmit)){b(c).on("submit",this.onSubmit)}},this));if(_.isFunction(this.onRender)){this.onRender()}},renderComplete:function(){this.focusTitle();b(this.$loadDialog).fadeOut("normal")},focusTitle:function(){if(_.isString(this.titleElement)){var a=b(this.display.contentElement).find(this.titleElement).get(0);if(a){a.tabIndex=0;a.focus()}}},layout:function(){if(this.display){b(this.display.container).css({position:"absolute",top:"-10000px",left:"0px",display:"block"});var h={width:b(this.display.container).outerWidth(),height:b(this.display.container).outerHeight()};var g={width:b(window).outerWidth(),height:b(window).outerHeight()};var a={left:b(window).scrollLeft(),top:b(window).scrollTop()};b(this.display.container).hide();var f=a.top+10;if(h.height<g.height){f=a.top+g.height/2-h.height/2}b(this.display.container).css({top:f+"px",left:(a.left+g.width/2-h.width/2)+"px"});b(this.display.closeElement).absolutize()}},displayLoadDialog:function(a){if(!a){a="Loading ..."}if(!this.$loadDialog){this.$loadDialog=b("<div tabIndex='0' class='modal-loading'>");this.$loadDialog.css({position:"absolute"})}this.$loadDialog.html(a);b(document.body).append(this.$loadDialog);this.$loadDialog.css({top:"-1000px",left:"0px"});this.$loadDialog.toggle("pulsate")},layoutScreen:function(){if(this.display){if(!this.$coverScreen){this.$coverScreen=b("#modal-screen")}if(!this.$coverScreen.length){this.$coverScreen=b("<div id='modal-screen' class='modal-screen'>");this.$coverScreen.hide()}b(this.$coverScreen).insertBefore(this.display.container);var f={width:b(window).outerWidth(),height:b(window).outerHeight()};var a={left:b(window).scrollLeft(),top:b(window).scrollTop()};var g={height:document.documentElement.scrollHeight,width:document.documentElement.scrollWidth};g.height=g.height>f.height?g.height:f.height;g.width=g.width>f.width?g.width:f.width;b(this.$coverScreen).css({top:"0",left:"0px",height:g.height+"px",width:g.width+"px"});if(this.$loadDialog){var h={width:this.$loadDialog.outerWidth(),height:this.$loadDialog.outerHeight()};this.$loadDialog.css({top:(a.top+f.height/2-h.height/2)+"px",left:(a.left+f.width/2-h.width/2)+"px"})}}},refresh:function(a){this.content=null;this.show()},handleCloseKeyPress:function(a){if(a.keyCode===13){this.hide()}else{if(a.keyCode===9&&a.shiftKey){a.preventDefault()}}},hide:function(){if(this.display){var d=b.proxy(function(){if(this.childForms){for(var c=0;c<this.childForms.length;c++){this.childForms[0].reset();delete this.childForms[0]}}},this);b(this.display.container).fadeOut("normal",d);if(_.isFunction(this.onHide)){this.onHide()}var a=b.proxy(function(){if(this.$trigger.length){this.$trigger.get(0).focus()}b(".modal-dialog, .modal-loading, .modal-screen").remove();this.display=this.$coverScreen=this.content=null;if(_.isFunction(this.onClientAfterHide)){this.onClientAfterHide()}},this);b(this.$coverScreen).fadeOut("normal",a);window.theForm=this.previousAspForm||null}}})})(jQuery);(function(b){b.widget("ui.uidialog",{container:{},options:{sourceElement:{},container:"",dialogClass:"",controller:"",controllerData:{sourceElement:{}},data:{},zIndex:0},onDialogOpen:function(){var a=this;a.options.controllerData.sourceElement=a.options.sourceElement;if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){ep.require(this.options.controller,function(c){b(a.options.container).trigger(a.options.controller+"_dialogOpen",a.options.controllerData)})}var d=b(".ui-icon");if(d.length){d.addClass()}},onDialogClose:function(){ep.debug("uidialog: onDialogClose method");if((typeof this.options.controller!=="undefined")&&this.options.controller!==""){b(this.options.container).trigger(this.options.controller+"_dialogClose")}},_create:function(){var a=this;b(this.options.container).dialog({autoOpen:false,draggable:false,resizable:false,dialogClass:this.options.dialogClass,width:this.options.width,zIndex:this.options.zIndex});this.container=b(this.options.container);this.container.bind("dialogopen",function(f,e){a.onDialogOpen()});this.container.bind("dialogclose",function(f,e){a.onDialogClose();a.destroy()})},_init:function(){this.container.dialog("open")},destroy:function(){this.container.unbind("dialogopen");this.container.unbind("dialogclose");b.Widget.prototype.destroy.call(this)}});b(function(){b("[data-dialog]").live("click mouseenter",function(h){var g=this;var a=b(this).data("dialog");a.sourceElement=h.target;if(h.type==="click"){if(a.isModal){if(a.validateSession){if(ep.utilities.validateSession()){b(this).epmodal(a)}else{document.location.reload()}}else{b(this).epmodal(a)}}else{if(a.isPopup){a.popupTarget=b(this);b(this).eppopup(a)}else{if(a.isHover){return true}else{b(this).uidialog(a)}}}}else{if(h.type==="mouseenter"){if(a.isHover){var e=setTimeout(function(){a.popupTarget=b(g);b(g).eppopup(a)},500);b(g).bind({mouseleave:function(){clearTimeout(e)}})}}}h.preventDefault();return false});if(ep.clientData.showJsonModalOnLoad){ep.require("ep/widgets/epmodal.js",function(d){var a=jQuery.parseJSON(ep.clientData.showJsonModalOnLoad);b(document.forms[0]).epmodal(a)})}b("[data-dialog]").each(function(e){var f=this;var a=b(f).data("dialog");if(a.isAutoOpenPopup){setTimeout(function(){b(f).trigger("click")},1000)}})})})(jQuery);(function(b){b.widget("ui.epmodal",b.ui.uidialog,{loadDialogFx:null,loadDialog:null,triggerElement:null,options:{url:"",hideCloseButton:false},onDialogOpen:function(){var a=this;b.ui.uidialog.prototype.onDialogOpen.call(this);if(!this.options.hideCloseButton){this.container.parent().bind("keydown",function(i){var l=(i.keyCode?i.keyCode:i.which);if(b(i.target).hasClass("ui-dialog-titlebar-close")&&l===b.ui.keyCode.ENTER){a.container.dialog("close");return false}if(i.keyCode!==b.ui.keyCode.TAB){return}var j=b(":tabbable",this),h=j.filter(":first"),k=j.filter(":last");if(i.target===h[0]&&!i.shiftKey&&b(i.target).hasClass("ui-dialog-titlebar-close")){j[1].focus();return false}if(i.target===k[0]&&!i.shiftKey&&h.hasClass("ui-dialog-titlebar-close")){h[0].focus();return false}})}b(".ui-dialog-titlebar-close").attr("title",ep.messages.Close)},onDialogClose:function(){theForm=this.previousAspForm||null;b.ui.uidialog.prototype.onDialogClose.call(this);this.container.unbind("dialogopen");this.container.unbind("dialogclose");this.container.parent().unbind("keypress");this.container.empty();if(this.triggerElement){this.triggerElement.focus()}},_create:function(){this.triggerElement=this.element;if(!this.options.container.length){this.options.container="#modal"}if(this.options.zIndex<=0){this.options.zIndex=10003}this.options.dialogClass+=" epmodal";if(b(this.options.container).length<1){b(document.body).append('<div data-auto="modal_content" id="'+this.options.container.replace("#","")+'"></div>')}this.displayLoadDialog();b.ui.uidialog.prototype._create.call(this);if(this.container&&this.container.dialog){this.container.dialog("option","modal",true);this.container.dialog("option","width","auto");this.container.dialog("option","height","auto")}},_init:function(){var a=this;a.options.data.nobk="T";b.ajax({url:a.options.dataUrl||ep.utilities.buildAjaxRequestPath(a.options.url),data:a.options.data,success:function(f){var e=f.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(e){f=e[1]}if(!a.previousAspForm&&window.theForm){a.previousAspForm=theForm}b(a.options.container).html(f);if(ep.isPageRTL()){ep.utilities.bidiSanitizeContent(a.options.container)}a.childForms=b("#modal form");if(window.theForm&&a.childForms.length>0){theForm=a.childForms[0]}b(".ui-dialog-titlebar-close").hover(function(){b(a).removeClass("ui-state-hover")},function(){});b(a.loadDialog).stop(true,true).fadeOut();b("#loadingOverlay").remove();b.ui.uidialog.prototype._init.call(a);b(a.options.container).height("auto");b(a.options.container).css("min-height","");if(a.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}else{b(".ui-dialog-titlebar-close").show()}if(b.isFunction(a.options.onload)){a.options.onload(a)}}})},destroy:function(){b.Widget.prototype.destroy.call(this)},loadDialogFocus:function(){try{this.loadDialog.focus()}catch(a){}},displayLoadDialog:function(d){if(!d){d=ep.messages.Loading}this.loadDialog=b("#modalLoadDialog");if(!this.loadDialog.length){this.loadDialog=b("<div id='modalLoadDialog'>").attr("tabIndex",0);this.loadDialog.className="modal-loading";this.loadDialog.css({position:"absolute"})}this.loadDialog.html(d);b("body").append(this.loadDialog);b("body").append('<div id="loadingOverlay"></div>');this.loadDialog.css({top:"-1000px",left:"0px"});b(this.loadDialog).effect("pulsate",{times:150},"normal");var a=b(window);if(this.loadDialog){this.loadDialog.css({top:(a.scrollTop()+a.height()/2-this.loadDialog.height()/2)+"px",left:(a.scrollLeft()+a.width()/2-this.loadDialog.width()/2)+"px"});this.loadDialogFocus()}}})})(jQuery);(function(b){b.widget("ui.eppopup",b.ui.uidialog,{dialogTop:0,dialogLeft:0,arrowElement:{},options:{popupTarget:{},popupOffset:0,popupPosition:null,hideCloseButton:false,isShowVerticalPopups:false,message:null,closeAllOther:null,success:b.noop},_create:function(){ep.debug("eppopup : _create()");if(this.options.zIndex<=0){this.options.zIndex=10005}if(this.options.closeAllOther){b("."+this.options.closeAllOther).not(this.element).dialog("close")}this.triggerElement=this.element;if(b(this.options.container).length<1){b(document.body).append('<div id="'+this.options.container.replace("#","")+'" data-auto="hover_db_desc"></div>')}b.ui.uidialog.prototype._create.call(this)},_init:function(){ep.debug("eppopup : _init()");if(this.options.isPopup&&this.container.dialog("isOpen")){this.container.dialog("close")}else{var a=this;if(this.options.url){b.ajax({url:ep.utilities.buildAjaxRequestPath(a.options.url),data:a.options.data,success:function(d){b(a.options.container).html(d);if(ep.isPageRTL()){ep.utilities.bidiSanitizeContent(a.options.container)}if(a.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}if(a.options.isPopup){b(document.body).bind("click.popupClose",function(c){if(a.container.parent().has(c.target).length===0&&a.triggerElement.get(0)!==b(c.target).get(0)){a.container.dialog("close")}})}if(a.options.success){a.options.success()}if(a.isClosed){a.container.dialog("close")}else{b.ui.uidialog.prototype._init.call(a);a.displayDialog();if(a.container&&a.container.dialog){a.container.dialog("option","position",[a.dialogLeft,a.dialogTop])}}},type:a.options.type||"get"});this.setHoverEvents()}else{if(this.options.message){b(this.options.container).html(this.options.message)}b.ui.uidialog.prototype._init.call(this);this.displayDialog();if(this.container&&this.container.dialog){this.container.dialog("option","position",[this.dialogLeft,this.dialogTop])}if(this.options.hideCloseButton){b(".ui-dialog-titlebar-close").hide()}this.setHoverEvents()}}b(this.options.container).height("auto");b(this.options.container).css("min-height","")},destroy:function(){if(this.options.isHover){this.triggerElement.unbind("mouseleave");this.container.parent().unbind("mouseenter");this.container.parent().unbind("mouseleave");if(this.options.hideCloseButton){b(".ui-dialog-titlebar-close").show()}}if(this.options.isPopup){b(document.body).unbind("click.popupClose")}b(this.arrowElement).remove();while(this.options.popupTarget.next().hasClass("eppopup-arrow-elem")){this.options.popupTarget.next().remove()}b.ui.uidialog.prototype.destroy.call(this)},setHoverEvents:function(){var a=this;if(this.options.isHover){b(this.triggerElement).bind({mouseleave:function(){var d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150);b(a.container).parent().bind({mouseenter:function(){clearTimeout(d)},mouseleave:function(){d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150)}});b(a.arrowElement).bind({mouseenter:function(){clearTimeout(d)},mouseleave:function(){d=setTimeout(function(){a.isClosed=true;a.container.dialog("close")},150)}})}})}},setPopupDisplay:function(){if(this.container&&this.container.dialog&&this.container.parents(".ep-dialog-main").length<1){var d=this.container.siblings(".ui-dialog-titlebar");d.addClass("ep-dialog-top-left");d.wrapInner('<div class="ep-dialog-top" />');d.wrapInner('<div class="ep-dialog-top-rt" />');this.container.wrap('<div class="ep-dialog-content" />');this.container.parents(".ep-dialog-content").wrap('<div class="ep-dialog-main-inner" />');this.container.parents(".ep-dialog-main-inner").wrap('<div class="ep-dialog-main" />');var a=this.container.parents(".ep-dialog-main");b('<div class="ep-dialog-bot-left"><div class="ep-dialog-bot-rt"><div class="ep-dialog-bottom"></div></div></div>').insertAfter(a)}},displayDialog:function(){var A=b(this.options.container).parent(),a=this.options.popupTarget.width(),B=this.options.popupTarget.height(),K=this.options.popupTarget.offset(),y=b(window).height(),F=b(window).width(),J={top:b(window).scrollTop(),left:b(window).scrollLeft()},H=a/2-10,I=B/2-5,v=22+H,G=11+I,x=38,z=K.left+a/2,L=K.top+B/2,D=L-A.height()/2-J.top,E,u,C,w="onTop";this.options.popupTarget.after("<div />");this.arrowElement=this.options.popupTarget.next();if(this.options.isShowVerticalPopups){if((L-G-A.height())>J.top){w="onTop"}else{w="onBottom"}}else{if((z+v+A.width())<J.left+F){w="onRight"}else{if((z-v-A.width())>J.left){w="onLeft"}else{if((L-G-A.height())>J.top){w="onTop"}else{if((L+G+A.height())<(J.top+y)){w="onBottom"}}}}}if(this.options.popupPosition){w=thePosition}if(w==="onRight"||w==="onLeft"){if(w==="onRight"){E=z+v+this.options.popupOffset-J.left;this.arrowElement.addClass("dialog-left-arrow");C=z+H+this.options.popupOffset-this.arrowElement.offsetParent().offset().left}else{if(w==="onLeft"){E=z-A.width()-v-this.options.popupOffset-J.left;this.arrowElement.addClass("dialog-rt-arrow");C=z-(H+this.arrowElement.width())-this.options.popupOffset-this.arrowElement.offsetParent().offset().left}}if(A.height()>y){D=J.top+(y/2)-(A.height()/2)}else{if((D+A.height())>(y+J.top)){D=y+J.top-A.height()}}if(D<0){D=0}if((D+A.height())<(L+x)){D=L+x-(A.height()/2)-J.top}else{if(D>(L-x)){D=L-x-J.top}else{if(L<J.top){D=L-J.top-x}}}u=(L-this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top}else{if(!this.options.isShowVerticalPopups){if(L<(y/2+J.top)){w="onBottom"}else{w="onTop"}}if(w==="onTop"){D=L-A.height()-G-J.top;this.arrowElement.addClass("dialog-top-arrow border-p1");u=L-I-this.arrowElement.height()-this.arrowElement.offsetParent().offset().top}else{if(w==="onBottom"){D=L+G-J.top;this.arrowElement.addClass("dialog-bot-arrow");u=(L+I-(this.arrowElement.height()/2)-this.arrowElement.offsetParent().offset().top)}}E=z-A.width()/2-J.left;C=(z-this.arrowElement.width()/2)-this.arrowElement.offsetParent().offset().left;if(A.width()>F){E=(F/2+J.left)-A.width()/2}else{if((E+A.width())>(J.left+F)){E=(J.left+F)-A.width()}if(E>z-x){E=z-x-J.left}else{if((E+A.width())<(z+x)){E=z+x-A.width()-J.left}}}}this.arrowElement.css("top",u+"px");this.arrowElement.css("left",C+"px");this.arrowElement.css("display","block");this.arrowElement.css("visibility","visible");this.arrowElement.addClass("eppopup-arrow-elem");this.dialogTop=D;this.dialogLeft=E}})})(jQuery);(function(c){var d={left:37,up:38,right:39,down:40,tab:9,enter:13,escape:27};c.widget("ui.dropdown",{options:{},_create:function(){var a=c(document);_.bindAll(this,"handleActiveClicked","activeKeyHandler","select","itemKeyHandler","mainKeyHandler","handleOutsideClick");this.stayOpen=false;this.isOpen=false;this.activeElement=this.element.find(".dd-active");this.list=this.element.find(".dd-list");this.selectedListItem=this.list.find(".dd-list-item .dd-input:checked").parents(".dd-list-item");this.activeElement.click(this.handleActiveClicked);this.activeElement.on("keydown",this.activeKeyHandler);this.list.on("click",".dd-input",this.select);this.list.on("keydown",".dd-input",this.itemKeyHandler);this.element.keydown(this.mainKeyHandler);a.on("click.ui.dropdown",this.handleOutsideClick)},mainKeyHandler:function(a){if(a.which===d.escape){this.closeDropdown();this.activeElement.focus()}else{if(a.which===d.enter){return false}}},handleActiveClicked:function(a){this.isOpen=!this.isOpen;if(c.browser.msie&&parseInt(c.browser.version,10)<8){if(this.isOpen){this.activeElement.closest(".field-row").css("z-index","2")}else{this.activeElement.closest(".field-row").css("z-index","auto")}}this.list.toggle();if(this.isOpen){this.stayOpen=true;this.focusSelectedListItem()}a.preventDefault()},select:function(n){var k=c(n.target),l=k.siblings(".dd-label"),m=l.html(),a=c(window),b=a.scrollLeft(),j=a.scrollTop();this.activeElement.find(".txt").html(m);this.activeElement.attr("title",m);this.selectedListItem=k.closest(".dd-list-item");k.focus();if(!this.stayOpen){this.closeDropdown();this.activeElement.focus()}window.scrollTo(b,j);this.stayOpen=false},itemKeyHandler:function(a){switch(a.which){case d.tab:this.closeDropdown();break;case d.enter:this.activeElement.focus();this.closeDropdown();return false;case d.up:this.stayOpen=true;if(!this.selectedListItem.prev().length){return false}break;case d.down:this.stayOpen=true;if(!this.selectedListItem.next().length){return false}break}},handleOutsideClick:function(b){var a=b.target;if(this.isOpen&&!c.contains(this.element[0],a)){this.closeDropdown()}},activeKeyHandler:function(m){var n=this.selectedListItem,r=this.selectedListItem.parent().children(),t=r.first().get(0),s=r.last().get(0),p=this.selectedListItem.get(0),a,q,b;function o(e){if(e===d.down){if(n.get(0)===s){n=r.first()}else{n=n.next()}}else{if(n.get(0)===t){n=r.last()}else{n=n.prev()}}}if((m.which===d.down)||(m.which===d.up)){o(m.which);this.selectedListItem=n;this.focusSelectedListItem();return false}else{q=String.fromCharCode(m.keyCode).toLowerCase();b=/^[a-zA-Z0-9\-]+$/;if(q.match(b)){do{o(d.down);a=(q===n.find(".dd-label").text().toLowerCase().substr(0,1));if(a){this.selectedListItem=n;this.focusSelectedListItem()}}while(!a&&(n.get(0)!==p))}}},closeDropdown:function(){if(c.browser.msie&&parseInt(c.browser.version,10)<8){this.activeElement.closest(".field-row").css("z-index","auto")}this.list.hide();this.isOpen=false},openDropdown:function(){if(c.browser.msie&&parseInt(c.browser.version,10)<8){this.activeElement.closest(".field-row").css("z-index","2")}this.list.show();this.isOpen=true},focusSelectedListItem:function(){var a=this.selectedListItem.find(".dd-input"),b=c(window),g=b.scrollLeft(),h=b.scrollTop();a.focus().click();window.scrollTo(g,h)}});c(function(){var a=c("[data-dropdown]");a.dropdown(a.data("dropDown"))})})(jQuery);if(!ep.dialog){ep.dialog={}}ep.dialog.PopupManager=function(b){return{createDialog:function(){var k=document.body.appendChild(b("<div>").get(0));k.className="ep-dialog border-p1";b(k).css({position:"absolute",display:"none"});var i=b("<div>").get(0);i.className="ep-dialog-top-left";k.appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-top-rt";k.childNodes[0].appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-top";var a=k.childNodes[0].childNodes[0].appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-main";b(i).attr("data-auto","ep_dialog_main");k.appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-main-inner";b(i).attr("data-auto","ep_dialog_main_inner_panel");k.childNodes[1].appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-content";b(i).attr("data-auto","ep_dialog_content_panel");var j=k.childNodes[1].childNodes[0].appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-bot-left";k.appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-bot-rt";k.childNodes[2].appendChild(i);i=b("<div>").get(0);i.className="ep-dialog-bottom";k.childNodes[2].childNodes[0].appendChild(i);var l=document.body.appendChild(b("<div>").get(0));var h=null;return{outerElement:k,innerElement:j,arrowElement:l,headerElement:a,ie6Fixer:h}},displayDialog:function(Q,L,R,a,ab,C,J){function G(c){var f=0,d=0;var e=c;do{f+=e.offsetTop||0;d+=e.offsetLeft||0;if(b(e).offsetParent().get(0)===document.body&&b(e).css("position")==="absolute"){break}e=e.offsetParent}while(e);e=c;do{if(!b.browser.opera||(e.tagName&&(e.tagName.toUpperCase()==="BODY"))){f-=e.scrollTop||0;d-=e.scrollLeft||0}e=e.parentNode}while(e);var g=[d,f];g.left=d;g.top=f;return g}b(document).trigger("ep.dialog.PopupManager:dialogWillDisplay");var N={width:b(Q).outerWidth(),height:b(Q).outerHeight()};var Z=G(Q);var I=b(window).height();var U=b(window).width();var Y={left:b(window).scrollLeft(),top:b(window).scrollTop()};if(b.browser.msie&&parseInt(b.browser.version,10)<8){Z=Q.getBoundingClientRect();I=document.body.clientHeight;U=document.body.clientWidth}var W=N.width/2-10;var X=N.height/2-5;var D=14+W;var V=16+X;var H=38;if(!ab){ab=0}b(L.arrowElement).css({top:"-10000px",left:"0px",display:"block"});b(L.outerElement).css({top:"-10000px",left:"0px",display:"block",width:R+"px"});var K=Z.left+N.width/2+Y.left;var aa=Z.top+N.height/2+Y.top;var S=aa-L.outerElement.clientHeight/2;var T;var E;var O;var F="onTop";if((K+D+R)<Y.left+U){F="onRight"}else{if((K-D-R)>Y.left){F="onLeft"}else{if((aa-V-L.outerElement.clientHeight)>Y.top){F="onTop"}else{if((aa+V+L.outerElement.clientHeight)<(Y.top+I)){F="onBottom"}}}}if(C){F=C}if(F==="onRight"||F==="onLeft"){if(F==="onRight"){T=K+D+ab;L.arrowElement.className="dialog-left-arrow";O=K+W+ab}else{if(F==="onLeft"){T=K-R-D-ab;L.arrowElement.className="dialog-rt-arrow";O=K-(W+L.arrowElement.clientWidth)-ab}}if(L.outerElement.clientHeight>I){S=Y.top+(I/2)-(L.outerElement.clientHeight/2)}else{if(S<Y.top){S=Y.top}else{if((S+L.outerElement.clientHeight)>(I+Y.top)){S=I+Y.top-L.outerElement.clientHeight}}}if(S<0){S=0}if((S+L.outerElement.clientHeight)<(aa+H)){S=aa+H-L.outerElement.clientHeight}else{if(S>(aa-H)){S=aa-H}}E=aa-L.arrowElement.clientHeight/2}else{if(aa<(I/2+Y.top)){F="onBottom"}else{F="onTop"}if(C!==null&&C!==undefined&&C.length>0){F=C}if(F==="onTop"){S=aa-L.outerElement.clientHeight-V;L.arrowElement.className="dialog-top-arrow border-p1";E=aa-X-L.arrowElement.clientHeight}else{if(F==="onBottom"){S=aa+V;L.arrowElement.className="dialog-bot-arrow";E=(aa+X)}}T=K-R/2;O=K-L.arrowElement.clientWidth/2;if(R>U){T=(U/2+Y.left)-R/2}else{if(T<Y.left){T=Y.left}else{if((T+R)>(Y.left+U)){T=(Y.left+U)-R}}if(T>K-H){T=K-H}else{if((T+R)<(K+H)){T=K+H-R}}}if(C!==null&&C!==undefined&&C.length>0){if(C==="onBottom"){S=Z.top+N.height+Y.top;T=Z.left;if(J==="right"){T=(Z.left+N.width)-R}}}}if(a){b(L.outerElement).insertAfter(Q);b(L.arrowElement).insertAfter(Q)}var M=b(L.outerElement).offsetParent().get(0);if(M.tagName!=="BODY"&&M.tagName!=="HTML"){var P=b(M).offset();S=S-P.top;E=E-P.top;T=T-P.left;O=O-P.left}b(L.arrowElement).css({top:E+"px",left:O+"px",display:"block"});b(L.outerElement).css({top:S+"px",left:T+"px",display:"block"});if(L.ie6Fixer!==null){L.outerElement.parentNode.insertBefore(L.ie6Fixer.frame1,L.outerElement);L.outerElement.parentNode.insertBefore(L.ie6Fixer.frame2,L.outerElement);b(L.ie6Fixer.frame1).css({top:S+7,left:T+22,width:L.outerElement.clientWidth-44,height:L.outerElement.clientHeight-14,display:"block"});b(L.ie6Fixer.frame2).css({top:S+22,left:T+8,width:L.outerElement.clientWidth-15,height:L.outerElement.clientHeight-44,display:"block"})}b(document).trigger("ep.dialog.PopupManager:dialogDisplayed")},hideDialog:function(a){if(!a){return}if(a.outerElement){a.outerElement.style.display="none";a.arrowElement.style.display="none"}if(a.ie6Fixer){if(a.ie6Fixer.frame1.parentNode){a.ie6Fixer.frame1.parentNode.removeChild(a.ie6Fixer.frame1)}if(a.ie6Fixer.frame2.parentNode){a.ie6Fixer.frame2.parentNode.removeChild(a.ie6Fixer.frame2)}}}}}(jQuery);ep.dialog.HoverPopup=function(w){var z=[];var v=null;var n=null;var q=null;var x=null;var r=null;var y=false;var t=null;function u(a){if(n!==null){clearTimeout(n);n=null}q=setTimeout(ep.dialog.HoverPopup.hideHover,(a||500))}function o(){if(q!==null){clearTimeout(q);q=null}}function s(){v=ep.dialog.PopupManager.createDialog();w(v.outerElement).on("mouseover",o);w(v.outerElement).on("mouseout",u);w(v.arrowElement).on("mouseover",o);w(v.arrowElement).on("mouseout",u);y=true}function p(a,b){if(!y){s()}var c=b||750;o();if(n!==null){clearTimeout(n);n=null}r=a.target;if(r.name==="iconImage"){r=r.offsetParent}n=setTimeout(ep.dialog.HoverPopup.showHover,c);return false}return{addHover:function(d,g,h,b,e,a){var c,f;if(_.isElement(d)){f=w(d).attr("id");c="#"+f}else{c="#"+d;f=d}w(document).on("mouseover",c,function(i){p(i,e)});w(document).on("mouseout",c,u);z.push({id:f,data:g,width:b,render:h,offset:a,mouseoverFunc:t})},showHover:function(){n=null;var e;for(var b=0;b<z.length;b++){e=z[b];if(e.id===r.id){v.innerElement.innerHTML=e.render(e.data);break}}var c=r;if(e.data&&e.data.positionElement){c=w(e.data.positionElement).get(0)}ep.dialog.PopupManager.displayDialog((c||r),v,e.width,false,e.offset);if(ep.clientData.restrictedElements&&ep.controller.GuestLoginController){var a=[];w.each(ep.clientData.restrictedElements,function(h,f){var g=w("#"+f,v.innerElement);if(g.length>0){a.push(g)}});ep.controller.GuestLoginController.applyRestrictions(a,function(){ep.dialog.HoverPopup.hideHover()})}var d=w(v.innerElement).find("[data-extmarkup]");if(d.length){ep.getInstance("ep.ExtendedMarkup",function(f){ep.ExtendedMarkup.processMathRecord(v.innerElement)})}},hideHover:function(a){ep.dialog.PopupManager.hideDialog(v);q=null;if(ep.dialog.FolderPopupObject){ep.dialog.FolderPopupObject.closeDialog()}},cancelHideHover:function(){o()},delayHide:function(a){u(a)},removeHover:function(a){if(!a){return}var d=-1;for(var c=0;c<z.length;c++){if(z[c].id===a.id){d=c;break}}if(d>=0){var b=z[c];if(b){w(b).off("mouseover",t);z.splice(c,1)}}}}}(jQuery);ep.dialog.ToggledPopup=function(t){var p=[];var y=null;var x=null;var o=false;var w=null;var n=null;var s=null;var u=null;function v(a){if(a.target!==x){o=true}}function q(a){w=a;var b=p[a.id];if(b){if(!y){y=ep.dialog.PopupManager.createDialog();t(document).on("ep.dialog.PopupManager:dialogWillDisplay",t.proxy(function(){ep.dialog.PopupManager.hideDialog(y)}),null);x=t("<a tabIndex=0 data-auto='close_link'></a>");t(y.headerElement).append(x);x.on("click",function(c){ep.dialog.ToggledPopup.closeDialog(c)});x.on("keypress",function(c){if(c.keyCode===13){ep.dialog.ToggledPopup.closeDialog(c);c.preventDefault()}});t(y.outerElement).on("click",v)}t(a).addClass("ep-dialog-toggle");t(a).removeClass("color-s1").addClass("color-p1");x.html('<span class="hidden" data-auto="close_label">'+b.closeText+"</span>");if(s!==null&&u!==null){t(s).addClass("hidden");u.appendChild(s);s=u=null}y.innerElement.innerHTML="";if(b.isAppendElement===true){s=b.data;u=b.data.parentNode;y.innerElement.appendChild(b.render(s));t(s).removeClass("hidden")}else{y.innerElement.innerHTML=b.render(b.data)}ep.dialog.PopupManager.displayDialog(w,y,b.width,!b.focusSelector,b.offset,b.position,b.alignment);t(document.body).on("click",ep.dialog.ToggledPopup.closeDialog);n=(_.isString(b.focusSelector))?t(y.innerElement).find(b.focusSelector).get(0):null;if(n){n.tabIndex=0;n.focus()}}}function z(){var a=t(".ep-dialog-toggle");if(a.length){a.each(function(b){t(b).removeClass("ep-dialog-toggle");if(t(b).hasClass("toggle")){t(b).removeClass("color-p1").addClass("color-s1")}})}}function r(a){var b=t(a.target).closest("a")[0];z();if(w===b){ep.dialog.ToggledPopup.closeDialog(a)}else{q(b);return false}}return{addDialog:function(d,c,g,j,h,a,b,e,f){var i=(_.isString(d))?t("#"+d).get(0):d;if(i){if(p[i.id]){t(i).off("click",r)}t(i).on("click",r);i.tabIndex=0;p[i.id]={id:i.id,data:c,width:j,render:g||function(k){return k},closeText:h,focusSelector:a,isAppendElement:b,position:e,alignment:f}}},closeDialog:function(a){if(o){o=false}else{z();ep.dialog.PopupManager.hideDialog(y);t(document.body).off("click",ep.dialog.ToggledPopup.closeDialog);if(a){if(w===t(a.target).closest("a")[0]){a.preventDefault()}}w=null}},showDialog:function(a){q(a)}}}(jQuery);function __doLinkPostBack(P,x,N){if(x&&x.length>0){var I=getPostBackForm();var J=(P.length<1)?getPostBackPage(I,true):P;var K=getUpdatedFormAction(I,J);var y=unescape(x);var E=y.split("||");var A="";for(var z=0;z<E.length;z++){var H=E[z].split("~~");if(H.length>0){var D=H[0];var O=null;if(D.indexOf("hidden_")===0){var F=D.split("_");D=F[1];if(document.all&&!document.getElementById){O=document.all[H[1]]}else{O=jQuery("#"+H[1])[0]}}var M="hidden";var C=D;var e=D;var B=null;if(O){B=O.value}else{B=H[1]}var G=null;try{if(document.all&&!document.getElementById){G=document.all[D]}else{G=jQuery("#"+D)[0]}}catch(L){G=document.getElementById(D)}if((G===undefined)||(G==="")||(!G)){G=jQuery("<input/>").attr({type:M,id:C,name:e,value:B})[0];jQuery(I).append(G)}else{try{G.value=B;G.type=M;G.id=C;G.name=e}catch(i){A+=C+"="+B+"&"}}G=null}H=null}I.action=K;I.method="post";if(A!==""){K+="&"+A}if(((N!==undefined)&&(N!==""))||(N)){I.target=N}I.__EVENTTARGET.value="";I.__EVENTARGUMENT.value="";I.submit()}}function AddAnchorToAction(b){document.forms[0].action+="#"+b};function updateCheckboxGroupWithParent(j,l){var i=document.getElementById(l);if(i){var h=i.getElementsByTagName("input");for(var e=0;e<h.length;e++){var k=h[e];if(k.type==="checkbox"){k.checked=j}}}}function checkAll(f){for(var e=0;e<theForm.elements.length;e++){var d=theForm.elements[e];if(d.type==="checkbox"&&d.name.indexOf(f)>-1){d.checked=true}}}function uncheckAll(f){for(var e=0;e<theForm.elements.length;e++){var d=theForm.elements[e];if(d.type==="checkbox"&&(!f||d.name.indexOf(f)>-1)){d.checked=false}}}function setCheckboxesByName(h,g){var e=document.getElementsByName(h);if(e){for(var f=0;f<e.length;f++){e[f].checked=g}}}function ToggleVisibility(d){var c=getElementById(d);if(c){if(c.style.display!=="none"){c.style.display="none"}else{c.style.display=""}}}function ToggleDisplay(f){var e=getElementById(f);if(e){var d=e.style.display==="none"?"block":"none";e.style.display=d}}function ToggleDisplayRow(f){var e=getElementById(f);if(e){var d=e.style.display==="none"?"display:table-row;":"display:none;";e.style.cssText=d}}function openprintSearchHistory(i){var l=(screen.width-250);var k=(screen.height-250);var g=((screen.width-l)/2);var j=((screen.height-k)/2)-50;var h=window.open(i,"PrintHistory","toolbar=1,location=0,directories=0,status=0,menubar=1,scrollbars=yes,resizable=no,top="+j+",left="+g+",width="+l+",height="+k);h.focus()}function SelectChecked(h,f){var i=jQuery("#s_"+h);if(i.length){var j=jQuery("#e_"+h);if(!i.is(":checked")){if(j.length){j.attr("checked",false)}var g=jQuery("#f_"+h);if(g.length){g.attr("checked",false)}}else{if(f){if(j.length){j.attr("checked",true)}}}}}function ExplodeChecked(f){var d=jQuery("#e_"+f);if(d.length){if(d.is(":checked")){var e=jQuery("#s_"+f);if(e.length){e.attr("checked",true)}}}}function FocusChecked(f){var d=jQuery("#f_"+f);if(d.length){if(d.is(":checked")){var e=jQuery("#s_"+f);if(e.length){e.attr("checked",true)}}}}function ShowHideLimiters(f){var g=document.getElementsByTagName("tr");if(g){for(var e=0;e<g.length;e++){var h=g[e].attributes["class"];if(h){if(h.value==="display-toggled"||h.value==="hide"){g[e].style.display=f?"":"none"}else{if(h.value==="show"){g[e].style.display=!f?"":"none"}}}}}}function focusTextbox(f){if(typeof(searchID)!=="undefined"&&searchID){var d=document.getElementById(searchID);if(d){d.focus()}}else{for(var e=0;e<document.forms[0].length;e++){if(document.forms[0][e].type==="text"){document.forms[0][e].focus();return}}}}function focusOnMainContent(){if(window.screen.width<1024&&document.location.toString().indexOf("#")<0){window.scroll(0,100)}}function focusOnAnchorResultList(){jQuery("#resultListAnchor").scrollTo()}function selectCheckboxParentElement(s,o,v,y,u,x,p){if(!x){x=y}if(!p){p=u}var t=s.parentNode;while(t){var n=false;if(o.length>0&&t.tagName.toLowerCase()===o.toLowerCase()){n=true}else{if(v.length>0&&t.id.toLowerCase()===v.toLowerCase()){var z=elem.id.toLowerCase();var r=z.lastIndexOf(v.toLowerCase());n=r===z.length-v.length}}if(n){var q=t.className;var w=q===x||q===p;if(s.checked){t.className=w?x:y}else{t.className=w?p:u}break}else{t=t.parentNode}}}function updateFolderSelectAll(d){if(d.checked){aSelectedFolderItemCount++}else{aSelectedFolderItemCount--}selectCheckboxParentElement(d,"li","","folder-list-item-selected","folder-list-item");var c=getElementByClientId("toggleAllCheckboxes",document.getElementById("folder-content"));if(c){c.checked=aSelectedFolderItemCount===aTotalFolderItemCount;if(c.checked===true){ep.folder.selectDeselectAll(c)}}ep.displayutilities.updateItemList(d)}function isOneOrMoreChecked(k,j,h){var l=document.getElementsByTagName("input");var i=false;for(var g=0;g<l.length&&!i;g++){if(l[g].type==="checkbox"&&l[g].name.indexOf(k)>-1&&l[g].checked){i=true}}if(i){if(j){return confirm(j)}}else{if(h){alert(h)}}return i}function isAtLeastOneChecked(j,k){var l=false;var m=j.split(",");var o;for(var p=0;p<m.length&&!l;p++){o=document.getElementsByName(m[p]);if(o){for(var i=0;i<o.length&&!l;i++){l=o[i].checked}}}var n=document.getElementById(k);jQuery(".submit_emailprint").attr("disabled",!l);if(n){n.style.display=l?"none":"block"}return l}function IsAnyCheckbox(g,f){var e=1;var h=true;if(f){h=false}while(jQuery("#"+g+e).length){if(f){if(jQuery("#"+g+e).is(":checked")){h=true;break}}else{if(!jQuery("#"+g+e).is(":checked")){h=false;break}}e++}return h}function isAnyCheckBoxChecked(g){var h=false;var i=g.split(",");var j;for(var f=0;f<i.length&&!h;f++){j=document.getElementById(i[f]);if(j){h=j.checked}}return h}if(!ep.displayutilities){ep.displayutilities={}}ep.displayutilities.SelectedItems=[];ep.displayutilities.MaxBlockItems=25;ep.displayutilities.initSelected=function(e,d){var f=jQuery("#"+e);if(!f.length||f.val().length===0){return}if(!isNaN(d)){ep.displayutilities.MaxBlockItems=d}ep.displayutilities.SelectedItems=f.val().split(",")};ep.displayutilities.updateItemList=function(e){var d=ep.displayutilities.getItemValue(e);if(e.checked){if(ep.displayutilities.SelectedItems.indexOf(d)<0){ep.displayutilities.SelectedItems.push(d)}return}var f=ep.displayutilities.SelectedItems.indexOf(d);if(f>=0){ep.displayutilities.SelectedItems.splice(f,1)}};ep.displayutilities.getItemValue=function(c){var d="folderCheckValue"+c.name.substring(c.name.indexOf("_"));return jQuery("input[name='"+d+"']").first().val()};function onenterkeypress(c){var d=getElementById(c);if(d&&d.click){d.click();return false}else{if(debug_mode){alert("The wrong button ID '"+c+"' was assigned to submit the form!");return false}else{return false}}}function is_key(d,f){var e=d.which?d.which:d.keyCode;if(e===f){if(document.all){d.returnValue=false}return true}else{return false}}function is_enter_key(f){var d=13;var e=10;return is_key(f,d)||is_key(f,e)}function is_down_arrow_key(c){var d=40;return is_key(c,d)}function is_up_arrow_key(c){var d=38;return is_key(c,d)}function onkeypress_event(d,f){if(is_enter_key(d)){var e=d.srcElement;if(!e){e=d.target}if(e&&e.getAttribute("autocomplete")==="on"){return true}else{return onenterkeypress(f)}}return true};(function(b){b(function(){var r={left:37,up:38,right:39,down:40,tab:9,enter:13};var D=function(d,c){c.addClass("active");if(a(d)){c.addClass("active-left")}};var a=function(c){if(c.length>0){return(c.offset().left<0)}};var C=function(c){c.removeClass("active-left").removeClass("active")};var x=b(".subnav-item"),E=b(".nav-item"),y=b(".submenu-trigger"),u=y.find(".subnav-item > .submenu");var B=function(c){var d=b(this),f=c?d.parent().closest(".submenu-trigger")[c]():d.parent().closest(".submenu-trigger");if(f.length){f.focus()}};var w=function(c,g,f){var d=b(this),j=g.index(d),k=g.length-1,h=j+f;if(h<0){g.last().focus()}else{if(h>k){g.first().focus()}else{var i=g.eq(h);i.focus()}}};var v=function(c,d){w.call(this,c,d,-1)};var A=function(c,d){w.call(this,c,d,1)};var z=function(){var c=b(this),d=c.children(".submenu").children(".subnav-item").not("[data-selected]").first();d.focus()};E.keypress(function(c){if(c.which===r.enter){c.stopPropagation();c.preventDefault()}}).keydown(function(c){var d=b(this),g=d.index();switch(c.which){case r.tab:if(c.shiftKey){if(g!==0){c.preventDefault();v.call(this,c,d.parent().children())}}else{if(g!==d.parent().children().length-1){c.preventDefault();A.call(this,c,d.parent().children())}}break;case r.up:c.preventDefault();break;case r.down:c.preventDefault();break;case r.enter:c.stopPropagation();c.preventDefault();if(!d.hasClass("submenu-trigger")){var f=d.find(".link").first();if(f.attr("data-dialog")){f.click()}else{if(f.attr("target")==="_blank"){window.open(f.attr("href"))}else{window.location=f.attr("href")}}}break}}).keyup(function(c){var d=b(this);switch(c.which){case r.enter:D(d.find(".submenu").first(),d);z.call(this);break;case r.down:D(d.find(".submenu").first(),d);z.call(this);break;case r.right:C(d);A.call(this,c,d.parent().children());break;case r.left:C(d);v.call(this,c,d.parent().children());break}}).focus(function(){b(this).addClass("highlight")}).blur(function(){b(this).removeClass("highlight")});var t=function(d){var f=b(this),c=f.closest(".nav-item");C(c);var g=c[d]();if(!g.length){if(d==="prev"){g=c.parent().children().last()}else{if(d==="next"){g=c.parent().children().first()}}}if(g.hasClass("submenu-trigger")){D(g.find(".submenu").first(),g);z.call(g[0])}else{g.focus()}};x.keydown(function(c){if(c.which===r.enter){c.stopPropagation();c.preventDefault()}else{if(c.which===r.tab){C(b(this).parents(".submenu-trigger"))}}}).keyup(function(c){var d=b(this);c.preventDefault();c.stopPropagation();switch(c.which){case r.left:var f=d.parent().closest(".submenu-trigger");C(d.parent().closest(".submenu-trigger"));if(f.hasClass("nav-item")){t.call(this,"prev")}else{B.call(this)}break;case r.right:if(!d.hasClass("submenu-trigger")){C(d.parents(".submenu-trigger"));t.call(this,"next")}break;case r.up:v.call(this,c,d.closest(".submenu").children().not("[data-selected]"));break;case r.down:A.call(this,c,d.closest(".submenu").children().not("[data-selected]"));break;case r.enter:if(!d.hasClass("submenu-trigger")){window.location=d.find(".submenu-link").first().attr("href")}break}}).focus(function(){b(this).addClass("highlight")}).blur(function(){b(this).removeClass("highlight")});x.filter(".submenu-trigger").keyup(function(c){var d=b(this);if(c.which===r.right||c.which===r.enter){var f=d.find(".submenu").first();D(f,d);f.children().first().focus()}});var s=navigator.userAgent;if(s.indexOf("Android")!==-1||s.indexOf("Phone")!==-1||s.indexOf("iPad")!==-1){y.on("touchend",function(c){var d=b(this);y.each(function(g,f){if(!d.is(f)&&d.find(f).length===0){C(b(f))}});if(d.hasClass("active")&&d.find(".submenu").find(c.target).length===0){C(d);return true}D(d.children(".submenu"),d)});y.click(function(){e.preventDefault()});u.on("touchend",function(c){var d=b(this),f=d,g=f.children(".submenu");D(g,f)});b(document).on("touchend",function(c){if(y.find(c.target).length===0&&!y.is(c.target)){C(b(".submenu-trigger"))}})}else{y.on("hover",function(c){var d=b(this);if(c.type==="mouseleave"&&d.hasClass("active")){C(d);return}D(d.children(".submenu"),d)});u.on("hover",function(c){var d=b(this),f=d,g=f.children(".submenu");if(c.type==="mouseleave"&&d.hasClass("active")){C(d);return}D(g,f)});b(document).on("click",function(c){C(b(".submenu-trigger"))})}})})(jQuery);function openTip(d){var c=window.open(d,"searchtip","status=no,width=550,height=450,resizable=yes,scrollbars=yes");c.focus()}function openWideTip(e,f){if(f){e+="#"+f}var d=window.open(e,"searchtip","status=no,width=800,height=600,resizable=yes,scrollbars=yes");d.focus()}function openListItem(c){var d=window.open(c,"LinkListItem","top=10,left=200,width=750,height=450,status=1,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=1");d.focus()}function newWin(h,e,g){if(g.length===0){g=""}if(e.length===0){e=""}var f=window.open(h,e,g);f.focus();if(document.all&&window.event){window.event.returnValue=true}return(true)}function imageQuickView(d){var c=window.open(d,"ImageQuickView","status=0,menubar=1,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.focus();if(document.all&&window.event){window.event.returnValue=false}return(false)}function createNotePopup(f){var h=/msie 6/.test(navigator.userAgent.toLowerCase());var j=/msie 7/.test(navigator.userAgent.toLowerCase());var g="width=415";if(h||j){g="width=435"}var i=window.open(f,"CreateNote","status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0,height=505,"+g);i.focus()}function OpenDictionary(d){var c=window.open(d,"Dictionary","top=40,left=200,width=590,height=400,status=1,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.focus();if(document.all&&window.event){window.event.returnValue=false}}function SubmitSearchToParent(d){var c=window.opener;c.__doLinkPostBack("","target~~popup||args~~"+d,"");window.close()}function OpenInset(d){var c=window.open("","Inset","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0");c.location=d;c.focus();if(document.all&&window.event){window.event.returnValue=false}return(false)}function PopUpHealthology(j){var l=732;var g=604;var k=(screen.width-l)/2;var h=(screen.height-g)/2;var i=window.open(j,"healthology","top="+h+",left="+k+",width="+l+",height="+g+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");i.focus();if(document.all&&window.event){window.event.returnValue=false}}function PopUpAnimation(k,i,l){var o=i||"240";var p=l||"320";var m=(screen.width-p)/2;var j=(screen.height-o)/2;var n=window.open("","animation","top="+j+",left="+m+",width="+p+",height="+o+",status=0,menubar=0,scrollbars=0,titlebar=0,resizable=0,location=0,toolbar=0,channelmode=0,directories=0,fullscreen=0");n.document.open();n.document.write("<html>\n<head>\n");n.document.write('<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">\n');n.document.write("<title>Flash Animation</title>\n</head>\n");n.document.write('<body bgcolor="#000000" onload="preload();">\n');n.document.write('<div id="message" style="display:block;position:absolute;left:0;top:'+o/2+";width:"+p+";height:"+o/2+';font-family:Verdana,Arial,Sans-Serif;font-size:14pt;font-weight:bold;text-align:center;background-color:#000000;color:#ffffff;">Loading... Please wait!</div>\n');n.document.write('<div id="wrapper" style="display:none;position:absolute;left:0;top:0;width:'+p+";height:"+o+';background-color:#000000;">\n');if(navigator.appName.toLowerCase().indexOf("explorer")!==-1){n.document.write('<object id="animation" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab" width="'+p+'" height="'+o+'">\n');n.document.write('<param name="Movie" value="'+k+'"/>\n')}else{n.document.write('<object id="animation" type="application/x-shockwave-flash" data="'+k+'" width="'+p+'" height="'+o+'">\n')}n.document.write('<param name="BgGolor" value="#000000"/>\n');n.document.write('<param name="AutoPlay" value="true"/>\n');n.document.write('<param name="Loop" value="false"/>\n');n.document.write('<param name="Quality" value="High"/>\n');n.document.write('<param name="Menu" value="false"/>\n');n.document.write('<param name="WMode" value="Opaque"/>\n');n.document.write('<param name="Scale" value="ShowAll"/>\n');n.document.write('<div id="download" style="display:block;position:absolute;left:0;top:'+o/2+";width:"+p+";height:"+o/2+';text-align:center;color:#ffffff;">\n');n.document.write('<a href="http://www.adobe.com/go/getflashplayer" title="Download Flash Player!" target="_blank"><img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" border="0"/></a></div>\n');n.document.write("</object>\n");n.document.write("</div>\n");n.document.write('<script language="javascript" type="text/javascript">function preload(){\n');n.document.write('document.getElementById("wrapper").style.display="block";\n');n.document.write('document.getElementById("message").style.display="none";\n');n.document.write("}<\/script>\n");n.document.write("</body>\n</html>");n.document.close();n.focus();if(document.all&&window.event){window.event.returnValue=false}}function PopUpFlashVideo(c){var d=ep.utilities.getBaseRequestPath();if(d!==null){window.open(d+c,"flvplayer","width=420,height=360")}}function getControls(b){return[document.forms[0][document.forms[0]["text_"+b].value],document.forms[0][document.forms[0]["hidden_"+b].value],document.getElementById(document.forms[0]["label_"+b].value.replace(/\$/g,"_")),document.forms[0][document.forms[0]["button_"+b].value]]}function openPreSelWindow(f,h,j){var i=getControls(j);var g=i[0].value;if(h){newWin("popup-index?sid="+f+"&hid="+h+"&vid=&id="+j+"&term="+g,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}else{newWin("popup-index?sid="+f+"&vid=&id="+j+"&term="+g,"indexlist","top=90,left=300,width=450,height=545,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=no")}}function setPreSelTerm(f,e){window.focus();var d=getControls(e);d[0].value="";d[0].style.display="none";d[1].value=f;d[2].style.display="none";d[2].innerHTML=f;d[2].style.display="";d[3].style.display=""}function resetPreSelTerm(d){var c=getControls(d);c[1].value="";c[2].style.display="none";c[3].style.display="none";c[0].style.display=""}function openOLRTestWindow(h,k,i,l,j,g){if(i){newWin("olrtests?sid="+h+"&vid="+k+"&hid="+i+"&db="+l+"&an="+j+"&md="+g,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0")}else{newWin("olrtests?sid="+h+"&vid="+k+"&db="+l+"&an="+j+"&md="+g,"Tests","top=50,left=50,width=850,height=500,status=0,menubar=0,scrollbars=1,titlebar=0,resizable=1,location=0,toolbar=0")}}function OpenPDF(c){var d=window.open(c,"_pdf","top=40,left=100,width=750,height=800,toolbar=no,location=no,directories=no,status=no,menubar=no,scrollbars=yes,resizable=yes");d.focus();return false}function showMessageBox(i){var m=getElementById("messageBox");if(m){var j=getElementByClientId("lblMessage",m);if(j&&i){j.innerHTML=i}m.style.width=document.body.offsetWidth.toString()+"px";m.style.height=document.body.offsetHeight.toString()+"px";var n=document.getElementById("messageContents");var l=document.getElementById("coverScreen");var o=(document.body.offsetHeight/2-n.offsetHeight/2)+"px";var p=(document.body.offsetWidth/2-n.offsetWidth/2)+"px";l.style.left=p;n.style.left=p;l.style.top=o;n.style.top=o;m.style.visibility="visible";l.style.height=n.offsetHeight.toString()+"px";l.style.width=n.offsetWidth.toString()+"px";l.style.visibility="visible";var k=getElementByClientId("btnSubmit",m);window.scrollTo(o,p);if(k){k.focus()}}}function DisplayDynamicWindow(y,A,B,p,v,r,x){var z=getElementById(y);var q;var w,s;if(x){jQuery(document.body).append(z)}if(p){q=getElementById(p)}else{q=getElementById("coverScreen")}if(A==="hidden"){z.style.display="none";ep.ie6SelectFix(true)}else{if(A==="visible"){z.style.display="block";ep.ie6SelectFix();if(r){var t=jQuery(r).offset();s=t.top-z.offsetHeight/2;w=t.left+r.offsetWidth}else{s=200;w=Math.round((document.body.offsetWidth*0.5)-(z.offsetWidth*0.5))}z.style.left=w+"px";z.style.top=s+"px";q.style.top=s+"px";q.style.left=w+"px";q.style.height=z.offsetHeight.toString()+"px";q.style.width=z.offsetWidth.toString()+"px"}}z.style.visibility=A;q.style.visibility=A;var o;if(v){o=getElementById(v);if(o){o.innerHTML='<table id="messageBox2" class="popupContainer"><tr><td></td></tr></table>';var u=getElementById("messageBox2");u.style.width=document.body.offsetWidth.toString()+"px";u.style.height=document.body.offsetHeight.toString()+"px";u.style.visibility=A}}stopCurrentEvent(B)}function showImageBox(m,o){var r=getElementById("imageBox");if(r){ep.ie6SelectFix();var q=getElementByClientId("lblTitle",r);if(q&&m){q.innerHTML=m}var u=getElementByClientId("DisplayedLargeImage",r);if(u&&o){u.src=o}r.style.width=document.body.offsetWidth.toString()+"px";r.style.height=document.body.offsetHeight.toString()+"px";var s=document.getElementById("messageContents");var v=document.getElementById("coverScreen");var t=(document.body.offsetHeight/2-s.offsetHeight/2)+"px";var l=(document.body.offsetWidth/2-s.offsetWidth/2)+"px";var n;if(self.pageYOffset){n=self.pageYOffset}else{if(document.documentElement&&document.documentElement.scrollTop){n=document.documentElement.scrollTop}else{if(document.body){n=document.body.scrollTop}}}n=n+10;v.style.left="60px";s.style.left="60px";v.style.top=n+"px";s.style.top=n+"px";r.style.visibility="visible";v.style.height=s.offsetHeight.toString()+"px";v.style.width=s.offsetWidth.toString()+"px";v.style.visibility="visible";var p=getElementByClientId("btnSubmit",r);if(p){p.focus()}}}function closeImageBox(){var c=getElementById("imageBox");if(c){c.style.visibility="hidden"}ep.ie6SelectFix(true);var d=document.getElementById("coverScreen");if(d){d.style.visibility="hidden"}}function findDynamicPopupSize(d){d.style.left="-100%";d.style.display="block";var e=d.clientWidth;var f=d.clientHeight;d.style.display="none";return[e,f]}function findPos(b){return jQuery(b).offset()}var VerticalPosition={AlignTop:0,AlignBottom:1,AlignCenter:2};var HorizontalPosition={Left:0,Right:1};function PopupPosition(){this.hAlign=HorizontalPosition.Left;this.vAlign=VerticalPosition.AlignCenter;this.hPadding=15;this.vPadding=0}function PopupController(){this.position=new PopupPosition();this.coverScreen=true}PopupController.prototype={clearContent:function(d){var c=document.getElementById(d+"_t");if(c){c.innerHTML=""}},showPopup:function(theControlClientID,theReferenceElementID){ep.debug("popupwin : showPopup()");var aContainer=document.getElementById(eval(theControlClientID+"_p"));var aTarget=document.getElementById(eval(theControlClientID+"_t"));if(!aContainer||!aTarget){return}this.clearContent(theControlClientID);aTarget.innerHTML=this.getContent();this.positionPopup(aContainer,theReferenceElementID);if(this.coverScreen&&navigator.userAgent.toLowerCase().indexOf("msie 6")>-1){var aIFrame=document.getElementById(theControlClientID+"_iframe");if(!aIFrame){aIFrame=document.createElement("iframe");aIFrame.id=theControlClientID+"_iframe"}aIFrame.style.position="absolute";aIFrame.style.top=aContainer.style.top;aIFrame.style.left=aContainer.style.left;aIFrame.style.width=aContainer.clientWidth+"px";aIFrame.style.height=aContainer.clientHeight+"px";aContainer.style.zIndex="1";aContainer.parentNode.appendChild(aIFrame)}aContainer.style.display="block";jQuery(document).trigger("popuplinkclicked",[theReferenceElementID,theControlClientID])},getContent:function(){},positionPopup:function(i,f){var g=document.getElementById(f);var j=findPos(g);var h=findDynamicPopupSize(i);switch(this.position.hAlign){case HorizontalPosition.Left:i.style.left=(j.left-h[0]-this.position.hPadding).toString()+"px";break;case HorizontalPosition.Right:i.style.left=(j.left+g.scrollWidth+this.position.hPadding).toString()+"px";break}switch(this.position.vAlign){case VerticalPosition.AlignTop:i.style.top=j.top.toString()+"px";break;case VerticalPosition.AlignBottom:i.style.top=(j.top-h[1]+g.scrollHeight).toString()+"px";break;case VerticalPosition.AlignCenter:i.style.top=(j.top+g.scrollHeight/2-h[1]/2).toString()+"px";break}}};function closeDynamicPopup(theClientID){var aContainer=document.getElementById(eval(theClientID+"_p"));if(aContainer){aContainer.style.display="none"}var aIFrame=document.getElementById(theClientID+"_iframe");if(aIFrame){aIFrame.parentNode.removeChild(aIFrame)}}function showShDetails(e,f){var d=new PopupController();d.getContent=function(){return document.getElementById("lastRun_"+f).innerHTML};if(ep.isPageRTL()){d.position.hAlign=HorizontalPosition.Right}d.showPopup(e,"lnkDetails_"+f)}function OpenPopup(e,l,o,k){var m=window.open("",l,(k?k:"height=540px,width=555px,resizable=no,scrollbars=no,toolbar=no,location=no,directories=no,directories=no,menubar=no,copyhistory=no"));if(m){var r=null;try{var q=new RegExp("^(?:\\w+://[\\w\\./]+(?:\\:\\d+)?/)?([\\w\\.]+)(?:\\?.+)?$");var p=e.replace(q,"$1");if(m&&m.location&&(m.location.toString()!==""||m.location.toString()==="about:blank")){r=m.location.toString().replace(q,"$1")}if(o||m.location.toString()==="about:blank"||!r||r!==p){m.location=e}if(navigator.appVersion.indexOf("Mac")!==-1){m.location.href=e}}catch(n){}m.focus()}}function removeBlockerIFrame(e){ep.ie6SelectFix(true);var f=e.id+"_iframe";var d=document.getElementById(f);if(d){d.parentNode.removeChild(d)}}function addBlockerIframe(j){ep.ie6SelectFix();var h=j.id+"_iframe";var i=jQuery("#"+h)[0];if(!i){i=document.createElement("iframe");i.id=h;i.title="BlockerFrame"}var g=findPos(j);i.style.position="absolute";i.style.left=g.left.toString()+"px";i.style.top=g.top.toString()+"px";i.style.width=j.clientWidth+"px";i.style.height=j.clientHeight+"px";try{document.body.removeChild(j);j.style.zIndex="1";document.body.appendChild(i);i.appendChild(j)}catch(f){}}function toggleFolderDropdown(k,n){var l=document.getElementById(n);var p=document.getElementById(k);var o=p.parentNode;var i=jQuery(o).position();var m=i.left;var j=i.top+o.offsetHeight;l.style.left=m.toString()+"px";l.style.top=j.toString()+"px";if(l.style.display==="none"){l.style.display="block";if(l.offsetHeight>l.style.maxHeight){l.style.overflow="scroll"}}else{l.style.display="none"}}function folderCreateParentSelect(h,j){var g=document.getElementById("folderParentValue");g.value=h;var f=document.getElementById("folderParentShowLink");f.innerHTML=unescape(j);var i=document.getElementById("folderParentSelect");i.style.display="none";if(navigator.appVersion.match(/MSIE 6.0/)){removeBlockerIFrame(i)}}function showQuickViewHint(g,e){var h=jQuery(g).position();var f=document.getElementById(e);if(f){jQuery(f).show();f.style.left=(h[0]-f.offsetWidth+g.offsetWidth)+"px";f.style.top=(h[1]-f.offsetHeight-5)+"px"}return false}function closeQuickViewHint(c){var d=document.getElementById(c);if(d){jQuery(d).hide()}return false}function showSmartTextViewHint(g,e){var h=jQuery(g).position();var f=document.getElementById(e);if(f){f.style.left=(h.left+g.offsetWidth+5)+"px";f.style.top=(h.top-g.offsetHeight)+"px";jQuery(f).show()}return false}function closeSmartTextViewHint(c){var d=document.getElementById(c);if(d){jQuery(d).hide()}return false}ep.updateVisualSearchLimiters=function(d){var c=d.target;ep.syncCheckboxState(c,document.forms[0]);jQuery.ajax({type:"post",url:c.action,data:{isAsyncModalPost:"true"},success:search});this.dialog.hide();d.preventDefault()};ep.syncModalCheckboxes=function(){if(this.href.match(/&resetForm=true/)){this.href=this.href.replace(/&resetForm=true/,"");this.content=null}else{if(this.childForms&&this.childForms.length>0){ep.syncCheckboxState(document.forms[0],this.childForms[0])}}};ep.addModalRedirectParameter=function(){if(this){var c=document.forms[0];var d=document.createElement("input");d.type="hidden";d.name="redirectUrl";d.value=c.action;this.appendChild(d)}};ep.clearModalContent=function(){if(this){this.content=null}};ep.ResetModalDialog=function(c,d){c.href=c.href+"&"+d;c.refresh();return false};ep.syncCheckboxState=function(j,h){if(!j||!h){return}var i=j.getElementsByTagName("input");for(var f=0;f<i.length;f++){if(i[f].type.toLowerCase()==="checkbox"){var g=h[i[f].name];if(g&&g.type.toLowerCase()==="checkbox"){g.checked=i[f].checked}}}jQuery(h).trigger("ep_syncCheckboxState_complete")};var EPDropDownBlocker=function(){_blockerFrame=null;return{AddBlocker:function(b){if(navigator.appVersion.match(/MSIE 6/)){if(!_blockerFrame){_blockerFrame=document.createElement("iframe");_blockerFrame.style.position="absolute"}if(b.parentNode){b.parentNode.insertBefore(_blockerFrame,b);_blockerFrame.style.width=b.clientWidth;_blockerFrame.style.height=b.clientHeight;_blockerFrame.style.left=b.offsetLeft+"px";_blockerFrame.style.top=b.offsetTop+"px";if(b.style.zIndex<2){b.style.zIndex=2}_blockerFrame.style.zIndex=b.style.zIndex-1}}},RemoveBlocker:function(){if(_blockerFrame&&_blockerFrame.parentNode){_blockerFrame.parentNode.removeChild(_blockerFrame)}}}}();var _imageTimeout;function logDataTransaction(h,g){var e=jQuery("#"+h).closest("form")[0].action.toString();e=e.replace(/(\/*)[\w\d]*?(\?)/,"$1logasync$2");var f="Mode=HoverView&ShortDB="+g.DB+"&AN="+g.UITerm+"&MID="+g.MID+"&IssnIsbn="+g.IssnIsbn+"&PubType="+g.PubType+"&SrcTitle="+g.JnBookTitle+"&Format=Image";jQuery.ajax({type:"post",url:e,data:f})}function showBiggerImage(C,w,B){var A=document.getElementById("relatedImagePopup");if(!A){A=document.createElement("span")}var s=A.getElementsByTagName("img")[0];if(!s){s=document.createElement("img");A.appendChild(s)}s.src=w;if(!s.complete&&!s.width&&!s.naturalWidth){_imageTimeout=setTimeout('showBiggerImage("'+C+'","'+w+'","'+B+'")',250);return}var t=jQuery("#"+C).data("previewimagejson");if(t){var v=ep.utilities.buildAjaxRequestPath("Detail/ImageHover",{Db:t.Database,Tag:t.UITag,Term:t.UITerm});jQuery.ajax({url:v,cache:false})}A.id="relatedInfoPopup";A.style.position="absolute";A.style.left="-5000px";A.className="related-info-shadow";s.className="related-info-image";document.getElementsByTagName("body")[0].appendChild(A);var y=s.width;var F=800;var E=10;var z=10;var D=F;var G=-1;var u=-1;var x=-1;var H=document.getElementById("resultListInnerDiv");if(H){G=H.offsetWidth;D=G-E;u=H.offsetLeft;x=u+G-1}if(D<z||D>F){D=F}if(y>D){s.style.maxWidth=""+D+"px";s.width=D;y=D}A.style.top=(jQuery(window).scrollTop()+80).toString()+"px";var r=(document.body.clientWidth/2)-(y/2);if((u>0)&&(r+y>x)){r=x-y;if(r<0){r=0}}if(ep.isPageRTL()){A.style.right=r.toString()+"px"}else{A.style.left=r.toString()+"px"}EPDropDownBlocker.AddBlocker(A)}function hideBiggerImage(){clearTimeout(_imageTimeout);var b=jQuery("#relatedInfoPopup");if(b.length){b.remove()}EPDropDownBlocker.RemoveBlocker()}function addThisClick(g){var h=document.getElementById(g);if(h&&ep.clientData.addThis){var e=ep.clientData.addThis.bookmarkUrl+"&url="+encodeURIComponent(h.value)+"&title="+encodeURIComponent(document.title);var f=window.open(e,"_blank","scrollbars=yes,menubar=no,width=620,height=520,resizable=yes,toolbar=no,location=no,status=no,screenX=200,screenY=100,left=200,top=100");f.focus()}};(function(b){if(!ep.utilities){ep.utilities={version:1}}ep.utilities.isNumeric=function(a){return(a-0)===a&&a.length>0};ep.utilities.numOrDefault=function(a,d){return ep.utilities.isNumeric(a)?a:(d||0)};ep.utilities.getAction=function(){return document.forms[0].action};ep.utilities.replaceEPCommand=function(k){var l="";var a=ep.utilities.getBaseRequestPath();if(a&&k!==null&&k.length!==0){var h=document.getElementById("aspnetForm");var j=h?h.action:window.location.href;var i=j.indexOf("?");l=a+k+(i>-1?j.substr(i):"")}return l};ep.utilities.getCommand=function(){var j;var g;var a;var h;var i;j=ep.utilities.getAction();g=j.indexOf("?");a=j.substring(0,g);h=a.lastIndexOf("/");i=a.substring(h+1);return i};ep.utilities.selectSingleNode=function(h,a){if(h===null||h.length===0){return null}if(a===null||a.length===0){return null}try{if(!("XPathEvaluator" in window)){return h.selectSingleNode(a)}else{try{return ep.utilities.getSingleNode(h,a)}catch(e){return h.selectSingNode(a)}}}catch(g){return ep.utilities.getSingleNode(h,a)}};ep.utilities.getSingleNode=function(g,h){var i=new XPathEvaluator();var a=i.createNSResolver(g.ownerDocument===null?g.documentElement:g.ownerDocument.documentElement);var j=i.evaluate(h,g,a,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return j.singleNodeValue};ep.utilities.getXmlElementValue=function(a){if(a.textContent!==undefined){return a.textContent}if(a.text!==undefined){return a.text}return null};ep.utilities.getBaseRequestPath=function(){var a;return function(){if(!a){var h=document.getElementById("RelRequestPath");if(h||ep.relativeRequestPath){var j=window.location.href;var k=new RegExp("(^.*)"+(ep.relativeRequestPath||h.value)+"\\?");var i=k.exec(j);if(i!==null&&i.length>1){a=i[1]}if(!a){var l=/^\w+:\/\/[^\/]+\/[^\/]+\//.exec(window.location.href);if(l&&l.length>1){a=l[0]}}if(a&&!/\/$/.test(a)){a=a+"/"}}}return a}}();ep.utilities.buildRouteKey=function(f,e,a){return f+"__"+e+"__"+a};ep.utilities.buildAjaxRequestPath=function(k,m){var l=document.getElementById("__sid");var n=document.getElementById("__vid");k=k.replace(/^\//,"");var o=ep.utilities.getBaseRequestPath()+k;if(m&&m.Db&&m.Term&&m.Tag){var j=ep.utilities.buildRouteKey(m.Db,m.Term,m.Tag);o=o+"/"+ep.utilities.urlSafeEncodeBase64(j)}var p=l?l.value:ep.sid;var a=n?n.value:ep.vid;if(p){o+="?sid="+p;if(a&&parseInt(a,10)!==-1){o+="&vid="+a}}return o};ep.utilities.buildBaseViewPortRoute=function(a,n,q){var m=document.getElementById("__sid");var r=document.getElementById("__vid");a=a.replace(/^\//,"");var l=ep.utilities.getBaseRequestPath()+a;if(n&&n.Db&&n.Term&&n.Tag){var p=ep.utilities.buildRouteKey(n.Db,n.Term,n.Tag);l=l+"/"+ep.utilities.urlSafeEncodeBase64(p)}l+="/"+q;var k=m?m.value:ep.sid;var o=r?r.value:ep.vid;if(k){l+="/"+k;if(o&&parseInt(o,10)!==-1){l+="/"+o}}l+="/";return l};ep.utilities.buildAjaxRequestPathWithNewReturn=function(e,f){var a=ep.utilities.buildAjaxRequestPath(e,f);if(ep.newReturnUrl){a+="&ReturnUrl="+encodeURIComponent(ep.newReturnUrl)}return a};ep.utilities.buildAjaxRequestPathWithExistingReturn=function(e,f){var a=ep.utilities.buildAjaxRequestPath(e,f);if(ep.existingReturnUrl){a+="&ReturnUrl="+encodeURIComponent(ep.existingReturnUrl)}return a};ep.utilities.encodeRecordkey=function(a){return encodeURIComponent(a)};ep.utilities.isEmptyObj=function(a){for(var d in a){if(a.hasOwnProperty(d)){return false}}return true};ep.utilities.formatNumber=function(d){d+="";x=d.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var a=/(\d+)(\d{3})/;while(a.test(x1)){x1=x1.replace(a,"$1,$2")}return x1+x2};ep.utilities.urlSafeEncodeBase64=function(u){var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var z="";var a,p,r,i,q,s,t;var w=0;u=ep.utilities._utf8_encode(u);while(w<u.length){a=u.charCodeAt(w++);p=u.charCodeAt(w++);r=u.charCodeAt(w++);i=a>>2;q=((a&3)<<4)|(p>>4);s=((p&15)<<2)|(r>>6);t=r&63;if(isNaN(p)){s=t=64}else{if(isNaN(r)){t=64}}z=z+y.charAt(i)+y.charAt(q)+y.charAt(s)+y.charAt(t)}var A=z.replace(/\+/g,"-").replace(/\//g,"_");var v=0;if(A.match(/\=/g)){v=A.match(/\=/g).length}return A.replace(/\=/g,"")+v};ep.utilities.urlSafeDecodeBase64=function(s){var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var v="";var a,n,p;var i,o,q,r;var t=0;s=s.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(t<s.length){i=u.indexOf(s.charAt(t++));o=u.indexOf(s.charAt(t++));q=u.indexOf(s.charAt(t++));r=u.indexOf(s.charAt(t++));a=(i<<2)|(o>>4);n=((o&15)<<4)|(q>>2);p=((q&3)<<6)|r;v=v+String.fromCharCode(a);if(q!==64){v=v+String.fromCharCode(n)}if(r!==64){v=v+String.fromCharCode(p)}}v=ep.utilities._utf8_decode(v);return v};ep.utilities._utf8_encode=function(h){h=h.replace(/\r\n/g,"\n");var a="";for(var c=0;c<h.length;c++){var g=h.charCodeAt(c);if(g<128){a+=String.fromCharCode(g)}else{if((g>127)&&(g<2048)){a+=String.fromCharCode((g>>6)|192);a+=String.fromCharCode((g&63)|128)}else{a+=String.fromCharCode((g>>12)|224);a+=String.fromCharCode(((g>>6)&63)|128);a+=String.fromCharCode((g&63)|128)}}}return a};ep.utilities._utf8_decode=function(a){};ep.utilities.bidiSanitizeContent=function(e){var a="div, em, strong, cite, abbr, acronym, sub, sup, span, a, p, h1, h2, h3, h4, h5, h6, pre, q, ins, del, dt, dd, li, label, option, legend, button, caption, strong";if(_.isString(e)){var f=jQuery(e);f.find(a).bidi();return f.html()}else{if(_.isElement(e)){jQuery(e).find(a).bidi()}}};ep.utilities.runQueryStringMethod=function(){var a=(window.location.search.indexOf("%u")!==-1)?unescape(window.location.search):window.location.search;var k=a.toQueryParams().runquerystringmethod;if(k){var j=k.split("_");if(j.length>1){var h=b("#"+j[0]);var i=j[1];if(h&&h.length&&h[i]){var l=j.length>2?j[2]:null;if(l&&l.length){ep.subscribe(l,function(){h[i]()},true)}else{h[i]()}}}}};ep.utilities.getDateObj=function(n,i){if(n){var s=i||"mm/dd/yyyy";var v=/[^mdyMDY]/.exec(s)[0];var a=s.split(v);var u=n.split(v);if(u.length<3){return false}var t,q,o;for(var r=0,p=a.length;r<p;r++){if(/m|M/.test(a[r])){t=u[r]}if(/d|D/.test(a[r])){q=u[r]}if(/y|Y/.test(a[r])){o=u[r]}}if(t>0&&t<13&&o&&o.length===4&&q>0&&q<=(new Date(o,t,0)).getDate()){return new Date(o,t-1,q)}}return null};ep.utilities.validateSession=function(){var d=location.href.split("/"+ep.interfaceId+"/")[0]+"/ValidateSessionAndUser";var a=false;b.ajax({url:d,data:"theSessionOnly=true&sid="+b("#__sid").val(),dataType:"JSON",type:"POST",async:false}).done(function(c){if(c.IsUserAndSessionValidToUse){a=true}});return a};ep.utilities.getQueryParams=function(g){var i={},h=g.split("&"),a;for(var j=0;j<h.length;j++){a=h[j].split("=");i[a[0]]=a[1]}return i}})(jQuery);Number.prototype.px=function(){return parseInt(this,10)+"px"};Number.isNumeric=function(b){return !isNaN(parseFloat(b))&&isFinite(b)};Number.numOrDefault=function(c,d){return ep.utilities.isNumeric(c)?c:(d||0)};(function(r){var o="folderLargeOn.gif";var n="folderLargeOff.gif";var s,q,m=0;if(!ep.folder){ep.folder={}}ep.folder.removeCurrentFolderItem=function(f,b,d,c,g){ep.debug("ep/updatefolder.js -> removeCurrentFolderItem");var e=ep.utilities.replaceEPCommand("removeinternalfolderitem");var a=r.ajax({url:e,type:"POST",data:{DB:f,UITag:b,UITerm:d,Title:c}}).done(function(i,h,j){ep.folder.updateCitationPage()})};ep.folder.updateCitationPage=function(){ep.debug("ep/updatefolder.js -> updateCitationPage");var a=ep.utilities.getCommand();if(a!=="detail"&&a!=="removeinternalfolderitem"&&a!=="citation"){return}location.replace(ep.utilities.getAction())};ep.folder.removeFolderItem=function(f,b,d,c,g){ep.debug("ep/updatefolder.js -> removeFolderItem");var e=ep.utilities.replaceEPCommand("removeinternalfolderitem");var a=r.ajax({url:e,type:"POST",data:{DB:f,UITag:b,UITerm:d,Title:c},dataType:"xml"}).done(ep.folder.addRemoveItemComplete);ep.folder.updateResultList(f,b,d,c,g)};ep.folder.updateResultList=function(g,i,j,d,z){ep.debug("ep/updatefolder.js -> updateResultList");var y=ep.utilities.getCommand();if(y!=="results"&&y!=="resultsadvanced"){return}var f=1;var e=ep.folder.getFolderData(f);while(e.length&&f<z){if(typeof e==="object"){e=JSON.stringify(e)}var x=ep.folder.escapeAndParseJson(e);var a=x.db;var b=x.uiTag;var h=x.uiTerm;var c=x.title;if(g===a&&i===b&&j===h&&d){ep.folder.toggleAddToFolderIcon(f,false);break}f++;e=ep.folder.getFolderData(f)}};ep.folder.getFolderData=function(a){ep.debug("ep/updatefolder.js -> getFolderData");a=parseInt(a,10);if(!Number.isNumeric(a)){return null}return r("#add_"+a).data("folder")};ep.folder.toggleFolderItem=function(f,E,G,a){ep.debug("ep/updatefolder.js -> toggleFolderItem");var c="";var H="";var e="";var I="";var K="";var J=false;var i="";var b="";var F="";var h="";var d=false;var L=true;if(a!==undefined&&a===false){L=false}if(f!==null&&f!==""){var j=r("#add_"+f);if(j===null){J=true;K=f}else{var D=j.data("folder");if(typeof D==="object"){D=JSON.stringify(D)}var g=ep.folder.escapeAndParseJson(D);c=g.db;H=g.uiTag;e=g.uiTerm;I=g.title;K=g.resultID;i=g.doid;b=g.segid;F=g.ebookFormat;h=g.abookFormat;d=g.companyFormat}}else{if(f===null&&G===null){throw"Invalid request.  theItemID and theJsonString cannot both be null"}if(typeof G==="object"){G=JSON.stringify(G)}G=ep.folder.escapeAndParseJson(G);c=G.db?G.db:G.DB;H=G.uiTag?G.uiTag:G.UITag;e=G.uiTerm?G.uiTerm:G.UITerm;I=G.title?G.title:G.Title;K=G.resultID?G.resultID:G.ResultID;F=G.aEbook?G.aEbook:false;h=G.aAbook?G.aAbook:false;if(G.aCompany){d=G.aCompany}else{if(G.ContentType){d=G.ContentType==="Company Information"?true:false}}}if(f!==null){ep.folder.toggleAddToFolderIcon(f,E)}ep.folder.addRemoveFolderItemRequest(c,H,e,i,b,K,I,J,E,L,F,h,d)};ep.folder.addRemoveFolderItemRequest=function(z,j,A,D,C,a,g,c,i,e,h,b,B){ep.debug("ep/updatefolder.js -> addRemoveFolderItemRequest");var d=ep.utilities.replaceEPCommand("addremovefolderitem");var f=r.ajax({url:d,type:"POST",data:{DB:z,UITag:j,UITerm:A,DOID:D,SegID:C,ResultID:a,Title:g,IsExternalItem:c,AddToFolder:i,RenderFolderControl:e,EbookFormat:h,AbookFormat:b,CompanyFormat:B},dataType:"xml"}).done(ep.folder.addRemoveItemComplete)};ep.folder.toggleAddToFolderIcon=function(f,b){ep.debug("ep/updatefolder.js -> toggleAddToFolderIcon");var d=r("#add_"+f);var a=r("#added_"+f);var c=r("#lnkAddToFolderImage"),e=r("#lnkAddToFolderImageEmpty");if(b==="true"||b===true){if(d&&a){d.hide();a.show()}if(c&&e){e.hide();c.show()}}else{if(d&&a){a.hide();d.show()}if(c&&e){c.hide();e.show()}}};ep.folder.addRemoveItemComplete=function(b){ep.debug("ep/updatefolder.js -> addRemoveItemComplete");var f=b;if(f===null){return false}var e=ep.utilities.selectSingleNode(f,"EPResponse/ControlHtml");var g=e!==null?ep.utilities.getXmlElementValue(e):null;if(g!==null){ep.folder.updateFolderItemsControl(g)}var d=ep.utilities.selectSingleNode(f,"EPResponse/NumberOfFolderItems");var a=ep.utilities.getXmlElementValue(d);if(a!==null){m=a;ep.folder.updateToolbarFolderControl()}var c=r("body");if(c.hasClass("column2-empty")&&parseInt(a,10)>0){c.removeClass("column2-empty");if(c.hasClass("column2-closed")){c.removeClass("column2-closed").addClass("column2-open")}}};ep.folder.updateFolderItemsControl=function(a){ep.debug("ep/updatefolder.js -> updateFolderItemsControl");var b=r("#folderItemsContainerControl");if(b!==null){b.html(a)}};ep.folder.updateToolbarFolderControl=function(){ep.debug("ep/updatefolder.js -> updateToolbarFolderControl");var a=r("#toolbarFolder");if(!a){return}var b=a.find("a").first();if(!b){b=a.find(".folder-control, .folder-control-empty").first()}b.removeClass().addClass("link color-s1");if(m>0){b.addClass("folder-control");b.attr("title",ep.messages.folderHasItemsTitle)}else{b.addClass("folder-control-empty");b.attr("title",ep.messages.folderHasNoItemsTitle)}};ep.folder.updateToolbarFolderCount=function(a){ep.debug("ep/updatefolder.js -> updateToolbarFolderCount");if(a){m++}else{m--}ep.folder.updateToolbarFolderControl()};function k(){ep.debug("ep/updatefolder.js -> UpdateMainFolderStyles");var a=r("#toolbarFolder");if(!a){return}var b=a.find("a").first();if(!b){b=a.find(".folder-control, .folder-control-empty").first()}b.removeClass().addClass("link color-s1");if(b){if(m>0){b.addClass("folder-control");b.attr("title",ep.messages.folderHasItemsTitle)}else{b.addClass("folder-control-empty");b.attr("title",ep.messages.folderHasNoItemsTitle)}}}function p(){ep.debug("ep/updatefolder.js -> UpdateMainFolderImage");var b;var c=r("#folderHasItemsHeader");if(c.length){b=c.children().first()}var a="";if(b){if(m>0){a=FolderHasItems;b.html(a).removeClass().addClass("link folder_items_main")}else{a=FolderHasNoItems;b.html(a).removeClass().addClass("link folder_empty_main")}}}ep.folder.addAll=function(){ep.debug("ep/updatefolder.js -> addAll");var c=r("[name='addToFolder']");if(c===null||c===undefined||!c.length){return}var b="";r.each(c,function(h,e){var i=r(this);var g=i.data("folder");if(!g){return}var d=g.resultID;var f=i.attr("data-contenttype");if(f&&f==="companyinfo"){d=i.data("itemid");if(g&&(i.is(":checked"))){if(i.attr("data-isAdded")&&i.attr("data-isAdded")==="true"){return}else{i.attr("data-isAdded",true)}}else{return}}else{ep.folder.toggleAddToFolderIcon(d,true)}b+=ep.folder.generateItemXml(d)});if(r.trim(b)!==""){var a="<Items>"+b+"</Items>";ep.folder.addAllXML(a);setTimeout(ep.dialog.ToggledPopup.closeDialog,1000)}};ep.folder.addAllXML=function(a){var c=ep.utilities.replaceEPCommand("addallfolderitems");var b=r.ajax({url:c,type:"POST",data:{ItemsXML:a},dataType:"xml"}).done(ep.folder.addRemoveItemComplete)};ep.folder.generateItemXml=function(i){ep.debug("ep/updatefolder.js -> generateItemXml");if(i===null){return null}var g=ep.folder.getFolderData(i);if(!g){return ep.folder.generateExternalSourceItemXml(i)}var e="";var j="";var h="";var c="";var b="";var d="";if(typeof g==="object"){g=JSON.stringify(g)}var a=ep.folder.escapeAndParseJson(g);if(a.doid!==undefined&&g!==null){e=a.doid}if(a.segid!==undefined&&a.segid!==null){j=a.segid}if(a.resultID!==undefined&&a.resultID!==null){b=a.resultID}if(a.ebookFormat!==undefined&&a.ebookFormat!==null){h=a.ebookFormat}if(a.abookFormat!==undefined&&a.abookFormat!==null){c=a.abookFormat}if(a.companyFormat!==undefined&&a.companyFormat!==null){d=a.companyFormat}var f='<Item Db="'+a.db+'" UITerm="'+a.uiTerm+'" DOID="'+e+'" SegID="'+j+'" IsEbookFormat="'+h+'" IsAbookFormat="'+c+'" IsCompanyFormat="'+d+'" UITag="'+a.uiTag+'" ResultID="'+b+'"><Title><![CDATA['+a.title+"]]></Title></Item>";return f};ep.folder.generateExternalSourceItemXml=function(b){ep.debug("ep/updatefolder.js -> generateExternalSourceItemXml");var a='<Item ResultID="'+b+'"></Item>';return a};ep.folder.SwapFolderImages=function(a){ep.debug("ep/updatefolder.js -> SwapFolderImages");if(a){r("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.addClass("item-saving-to-folder")})}else{r("#resultListInnerDiv").find(".item-not-in-folder").each(function(){this.removeClass("item-saving-to-folder").removeClass("item-not-in-folder").removeClass("item-in-folder")})}};function t(){ep.debug("ep/updatefolder.js -> SwapAllStyles");var a=r("[name='addToFolder']");r.each(a,function(c,b){ep.folder.swapItemStyle(r(this).attr("id").match(/\d+/)[0],true)})}ep.folder.addToFolderExternal=function(b,x){ep.debug("ep/updatefolder.js -> addToFolderExternal");if(b===null||b.length===0){return}if(x===null||x.length===0){return}var a=parent.frames[0].frameElement;if(a===null){return}var f=a.contentDocument;if(!f){try{f=a.contentWindow.document}catch(d){return}}var c=f.getElementById(b);if(c===null){return}var h=r(c).val().replace(/\n/g,"");if(h===null||h.length===0){return}var w=ep.folder.escapeAndParseJson(h);var e=r(f.body).find(".item-not-in-folder").first();var i=r(f.body).find(".item-in-folder").first();var j=ep.utilities.replaceEPCommand("addremovefolderitem");var g=r.ajax({url:j,type:"POST",data:{DB:w.db,UITag:w.uiTag,UITerm:w.uiTerm,ResultID:w.resultID,Title:w.title,IsExternalItem:false,AddToFolder:x,RenderFolderControl:false}}).done(function(u){if(x){e.hide();i.show()}else{e.show();i.hide()}})};ep.folder.selectDeselectAll=function(c){ep.debug("ep/updatefolder.js -> selectDeselectAll");if(c===null||c===undefined){return}var d=r(c).is(":checked");ep.folder.showHideLoadingImage(d,true);ep.folder.updateFolderSelectedItemsPage(d);var b=ep.utilities.replaceEPCommand("Folder/SelectFolderItems");var a=r.ajax({url:b,type:"POST",data:{theIsSelectAll:d},dataType:"json"}).done(function(f,e,g){ep.folder.selectFolderItemsComplete(f,d)})};ep.folder.showHideLoadingImage=function(d,b){ep.debug("ep/updatefolder.js -> showHideLoadingImage");var c=r("#imgLoadingContainer");var e=r(d?"#selectingContainer":"#deselectingContainer");var f=r("#selectDeselectContainer");var a="no-display";var g="folder-select-deselect-container";if(b){f.removeClass().addClass(a);e.removeClass().addClass(g);c.removeClass().addClass(g)}else{f.removeClass().addClass(g);e.removeClass().addClass(a);c.removeClass().addClass(a)}};ep.folder.updateFolderSelectedItemsPage=function(d){ep.debug("ep/updatefolder.js -> updateFolderSelectedItemsPage");var c="folder-list-item";var b="folder-list-item-selected";if(d===false){c="folder-list-item-selected";b="folder-list-item"}var a=r("."+c);a.each(function(){var e=r(this);e.removeClass().addClass(b);var f=e.children().first().children().first();f.attr("checked",d)})};ep.folder.selectFolderItemsComplete=function(a,b){ep.debug("ep/updatefolder.js -> selectFolderItemsComplete");ep.folder.showHideLoadingImage(b,false);try{if(a!==null){ep.displayutilities.SelectedItems=a.SelectedItems;aSelectedFolderItemCount=a.SelectedItems.length}}catch(c){}};ep.folder.folderItemsRefresh=function(){ep.debug("ep/updatefolder.js -> folderItemsRefresh");if(typeof EPWebServices!=="undefined"&&typeof EPWebServices.FolderWebService.FolderItemsRefresh==="function"){EPWebServices.FolderWebService.FolderItemsRefresh(window.GetSessionParms(),FolderItemsRefreshAjax)}return false};ep.folder.escapeAndParseJson=function(b){var c;try{c=r.parseJSON(b)}catch(a){c=r.parseJSON(b.replace(/\\/g,"\\\\"))}return c};function l(){r(".folder-toggle").on("click",function(a){a.preventDefault();if(ep.clientData.isShowAddFolderPopup){return}var c=r(this).data("isaddtofolder");var b=r(this).data("folder");if(b){ep.folder.toggleFolderItem(b.resultID,c,b,null)}})}r(l)})(jQuery);(function(c,d){c.extend(d,(function(){var X={},I={},M=d.queues.instance||[],J=d.queues.dependencies||[],P="css/",a="javascript/",D="javascript/";function Q(){if(window.loadFirebugConsole){window.loadFirebugConsole()}try{if(console.log.apply){console.log.apply(this,arguments)}else{console.log(Array.prototype.slice.call(arguments))}}catch(e){}}function N(e,m,k){if(!e){if(c.isFunction(k)){k(m)}return m||{}}var j=e.split("."),h=j.pop(),i=window,g,f=j.length,l=-1;for(;++l<f;){g=j[l];if(!i[g]){i[g]={}}i=i[g]}i=i[h]=m||{};if(c.isFunction(k)){k(i)}d.publish(e+":ready",i,true);return i}function E(h,f,j,e){f.epId=h;var i;if(j){var g=K(j);if(!c.isFunction(g)){M.unshift(j);F(function(){R(h,f,j,e)});return}return N(h,Class.create(g,f),e)}else{return N(h,Class.create(f),e)}}var R=jQuery.proxy(E,this);function W(g,i,f,e){var h=K(i);if(!c.isFunction(h)){M.unshift(i);F(function(){b(g,i,f,e)});return}f.epId=g;f=c.extend(X[g]||{},f);return N(g,new h(f),e)}var b=jQuery.proxy(W,this);function K(f){if(!f){return}var g=f.split("."),i=g.length,h=window,j,e;for(j=0;j<i;j++){e=g[j];if(!h[e]){return null}h=h[e]}return h}function O(g,f,i){if(!g){return}if(typeof g==="string"){g={epId:g}}else{if(!g.epId){throw ("ep.getInstance called with invalid parameters")}}var e=g.epId;if(X[e]){g=c.extend(X[e],g)}g.callback=(g.callback||f||c.noop);X[e]=g;if(c.isArray(i)){J=J.concat(i);M.push(e);T();return}var h=K(e);if(!h){if(!g.loading){g.loading=true;C(g.epId.split(".").join("/").toLowerCase()+".js")}M.push(e);return}else{if(c.isFunction(h.updateProperties)){h.updateProperties(g)}else{c.extend(h,g)}g.callback.call(h);return h}}function S(){var e=(d.bundles||d.pageScripts||[]),i=c('link[rel="stylesheet"]');i.each(function(){e.push(this.href)});var g=/(?:url\(').+(?='\);)/gi,h;i=c("style");i.each(function(){h=this.innerHTML.match(g)||[];c.each(h,function(k,l){e.push(l.replace("url('",""))})});var f,j=e.length;g=/\/(css|javascript)\//gi;while(j--){f=e[j];if(f.indexOf(d.baseImagePath)>-1){f=f.split(d.baseImagePath).pop().replace(g,"")}I[f]=true}}function C(e,f){var g=f||c.noop;if(!I[e]){$LAB.script(d.getFullUrl(e,a)).wait(function(){I[e]=true;g()})}else{g()}setTimeout(T,50)}function H(e,f){var g=f||c.noop;c.ajax({url:d.getFullUrl(e,D)}).done(function(h){g(h)});setTimeout(T,50)}function V(f,g,e){if(!I[f]){f=d.getFullUrl(f,P);var h=document.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");h.setAttribute("href",f);if(g&&typeof g==="string"){h.setAttribute("media",g)}var i=document.getElementsByTagName("head");if(i&&i.length>0){i[0].appendChild(h);I[f]=true;if(c.isFunction(e)){setTimeout(e,250)}}}else{if(c.isFunction(e)){e()}}}function F(f){if(!c.isFunction(f)){f=F}if(M.length){var e=M.shift();O(e);setTimeout(f,50)}}function T(){if(!d.initialized){d.initialized=true}if(J.length){var e=J.shift(),f=e,h,g;if(typeof f!=="string"){f=e.url;h=e.callback;g=e.media}if(/\.css/.test(f)){V(f,g,h)}else{if(/\.js/.test(f)){C(f,h)}else{if(/\.html/.test(f)){H(f,h)}else{O(f)}}}setTimeout(T,50)}else{F()}}function B(g,f){var e=g;if(c.isArray(e)){e=g.pop();J=J.concat(g)}J.push(c.isFunction(f)?{url:e,callback:f}:e);if(d.initialized){T()}}function U(){var e="eptemplate/";d.templates=c('body script[type^="'+e+'"]');if(d.templates.length){B(["jquery/plugins/jquery.tmpl.js",d.brandingPath+"templates/js/eptemplate.js"])}}function L(){var e=/defer-image\|(.+)/,f;c("[class*='defer-image']").each(function(g){f=e.exec(this.className||"");if(f&&f.length>1){this.src=f[1];this.className=c.trim(this.className.split(f[0]).join(""))}})}function G(){c("img[data-defer-image]").each(function(){this.src=c(this).data("defer-image")})}d.domLoad(function(){S();U();T();G()});return{registerClass:E,registerInstance:W,register:N,getInstance:O,require:B,loadImages:L,debug:(d.version==="1.0.0.0"?Q:c.noop)}})())})(jQuery,ep);(function(m){var l=m(),q=250,o;function k(){l=t();if(l.length&&!l.parent().length){m("body").append(l)}o=setTimeout(p,q)}function p(){if(l.parent().length){l.detach()}}function t(){return l||(m("#epAjaxActive").length?m("#epAjaxActive"):m('<div id="epAjaxActive" />'))}function s(){return l.html()||(ep.messages||{}).Loading||"Loading..."}function n(){l=t();l.html(s()).ajaxSend(k).ajaxComplete(p);k()}function r(){l.remove();l=null}m(window).load(p);m(document).ready(n);m(window).unload(r)})(jQuery);(function(f){var e={};this.parseJTemplate=function d(h,a){var b=e[h];if(!b){var c="var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+h.replace(/[\r\t\n]/g," ").replace(/'(?=[^#]*#>)/g,"\t").split("'").join("\\'").split("\t").join("'").replace(/<#=(.+?)#>/g,"',$1,'").split("<#").join("');").split("#>").join("p.push('")+"');}return p.join('');";b=new Function("obj",c);e[h]=b}return b(a)}})(jQuery);(function(b){ep.register("ep.util.JSON",(function(){function a(d){if(JSON&&JSON.stringify){return JSON.stringify(d)}}return{stringify:a}})())})(jQuery);var JSON;if(!JSON){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(b){ep.register("ep.util.iframe",(function(){function a(c,e,d){if(d>35){return}var f=i(c);if(f==="complete"){e();return}setTimeout(function(){a(c,e,d+1)},100)}function i(p){var d=b(p);var g="epNotReady";if(d&&d.length){var f=d[0];if(f&&f.readyState){g=f.readyState}}if(g==="epNotReady"){var e=[];try{e=d.contents()}catch(o){e=null}if(e&&e.length){var c=e[0];if(c&&c.readyState){g=c.readyState}}}return g}var h=false;function j(d,c){if(!h||c>25){h=false;return}d.focus();setTimeout(function(){j(d,c+1)},100)}function k(c){b(document).bind("focusin.focusfix",function(d){if(d.target.tagName==="IFRAME"){b(document).unbind("focusin.focusfix");b(document).bind("click.focusfix keydown.focusfix",function(){l()});b(document).bind("focusin.focusfix",function(e){if(e.target!==c){l()}});h=true;j(c,1)}})}function l(){h=false;b(document).unbind(".focusfix")}return{pdfReady:function(d,c){a(d,c,0)},preventPdfFocus:function(c){k(c)}}})())})(jQuery);(function(b){ep.registerClass("ep.base.Controller",{loaded:false,loading:false,initialize:function(a){b.extend(this,a);ep.domLoad(b.proxy(this._domLoaded,this));ep.windowLoad(b.proxy(this._windowLoaded,this));b(window).unload(b.proxy(this._windowUnLoaded,this))},_domLoaded:function(){var f=b.browser.msie,a=parseInt(b.browser.version,10),e=(f&&(a<=8))?true:false;if(e&&document.getElementsByClassName){document.getElementsByClassName=undefined}if(!this.loaded){this.onDomLoad();this.loaded=true}},_windowLoaded:function(){this.onLoad()},_windowUnLoaded:function(){this.onUnload()},onDomLoad:b.noop,onLoad:b.noop,onUnload:b.noop})})(jQuery);ep.registerClass("ep.base.PageController",{loader:null,query:{},initialize:function($super,b){$super(b)},_domLoaded:function($super){$super()},_windowLoaded:function($super){$super()}},"ep.base.Controller");ep.registerClass("ep.base.ModuleController",{loadMarkup:false,markupUrl:null,containerId:null,container:[],onUpdate:jQuery.noop,ModuleJson:null,updateMethod:"get",initialize:function($super,b){$super(b)},_domloaded:function($super){this.container=jQuery("#"+this.containerId);$super();if(this.loadMarkup){this.update()}},_windowUnLoaded:function($super){this.container=[];$super()},updateProperties:function(b){jQuery.extend(this,b);if(b.containerId){this.container=jQuery("#"+this.containerId)}},update:function(f,d,e){f=f||this.params||{};jQuery.extend(this,f);this.container=jQuery("#"+(e?e:this.containerId));d=this.markupUrl||d;if(!this.container.length){throw ("ep.base.ModuleController.load called without a valid containerId [containerId: "+(e||this.containerId)+"]. ")}if(!d){throw ("ep.base.ModuleController.load called without a valid markupUrl [markupUrl: "+d+"]. ")}jQuery.ajax({url:d,type:this.updateMethod.toUpperCase(),data:f,context:this,beforeSend:this.onBeforeSend,success:this.onSuccess,error:this.onError,traditional:true})},onBeforeSend:function(){this.loaded=false;this.loading=true},onSuccess:function(e,d,f){this.ModuleJson=jQuery.parseJSON(f.getResponseHeader("X-JSON"));ep.debug("ModuleController:onSuccess");this.loaded=true;this.loading=false;this.container.html(e);this.container.trigger("Module_updated",[this]);this.onUpdate();if(this.container.length&&this.container.parent().length){this.container.parent().show()}this.params=null},onError:function(d,e,f){ep.debug(f)}},"ep.base.Controller");ep.register("ep.manager.ClientStateManager",function(e){var g="ClientState";function f(c,d,b,a){e.ajax({url:ep.utilities.replaceEPCommand(g+"/"+c),data:{theGroup:d,theComponent:b.id,theValue:a}}).done(function(j){h(b,"updated",j)}).fail(function(j){h(b,"failed",j)})}function h(b,c,a){e(b).trigger("ep_manager_ClientStateManager_"+c)}return{setBool:function(c,b,a){f("UpdateBool",c,b,a)}}}(jQuery));ep.register("ep.util.expandcollapse");(function(B){var s="collapse-content",F="."+s+",[data-"+s+"]",H="collapse-toggle",u="."+H+",[data-"+H+"]",z="active",w="disableexpandcollapse",t=0;function v(b){var a=null,c=b.data(s);if(c){if(c.trigger){a=x(c.trigger)}else{if(typeof c==="string"){a=x(c)}}return a}else{if(b.prevAll(u).first().length){a=b.prevAll(u).first()}else{if(b.parents(u).first().length){a=b.parents(u).first()}}}return a}function G(a){var b=null,c=a.data(H);if(c){if(c.target){return x(c.target)}else{if(typeof c==="string"){return x(c)}}}if(a.nextAll(F).first().length){b=a.nextAll(F).first()}else{if(a.children(F).first().length){b=a.children(F).first()}}return b}function x(a){var b=(a.indexOf("#")>-1)||(a.indexOf(".")>-1)?B(a):B("#"+a);return b.length?b:null}function A(a){var c,b,d=false;if(a.hasClass(H)||a.data(H)){b=a;c=G(b)}else{if(a.hasClass(s)||a.data(s)){c=a;b=v(c)}}if((b&&b.data(w)==="true")||(c&&c.data(w)==="true")){d=true}if(c){c.data("trigger",b);b.data("target",c)}return{trigger:b,target:c,isDisabled:d}}function C(b,c,a){function e(h){var g;if(!B(h.target).closest(F).length&&!B(h.target).hasClass(H)&&!B(h.target).parent().hasClass(H)){if(c.is(":visible")){g=A(c.closest("li").find("a"));if(g.target&&g.trigger){g.target.toggle();C(g.trigger,g.target)}}}}if(!b||!c){return}var f=(a===true)?true:c.is(":visible");b[f?"addClass":"removeClass"](z);var d=b.data(H);if(!d||!(d.onText||d.offText)){D(f,ep.messages.hide_this_area,ep.messages.show_this_area,b,{titleOnly:true})}else{if(d){D(f,d.onText,d.offText,b,d)}}c.attr("aria-expanded",function(i,g){var h;if(g==="true"){h="false"}else{if(g==="false"){h="true"}}return h});if(f){B("body").on("click",e)}else{B("body").off("click",e)}b.trigger("toggled")}function D(e,b,c,a,d){if(b&&e&&a.attr("title")===c){r(b,a,d)}else{if(c&&!e&&a.attr("title")===b){r(c,a,d)}}}function r(c,a,b){a.attr("title",c);if(b){if(!b.titleOnly){a.html(c)}if(b.toggleIcon){a.find(".icon-trigger").html(c)}}}function E(b,a){ep.debug("expandcollapse: update()");b.preventDefault();var c=A(B(this));if(!c.target||!c.trigger||c.isDisabled){return}if(a===undefined){c.target.toggle();C(c.trigger,c.target)}else{c.target.toggle(a===true);C(c.trigger,c.target,(a===true))}c.target.trigger("toggled")}B(F).live("toggleVisibility",E);B(u).live("click",E);function y(c,b){var a;a=b.attr("aria-expanded");if(a==="true"||a==="false"){c.attr("id",function(d,e){if(!e){return"expandCollapseTrigger"+t}});b.attr("id",function(d,e){if(!e){return"expandCollapseTarget"+t}});t++;c.attr("aria-controls",function(d,e){if(!e){return b.attr("id")}});b.attr("aria-labelledby",function(d,e){if(!e){return c.attr("id")}});c.attr("title",function(d,e){if(!e){if(a==="true"){return ep.messages.hide_this_area}else{if(a==="false"){return ep.messages.show_this_area}}}})}}ep.util.expandcollapse.setupAria=y;B(function(){B(u).each(function(){var b=B(this),c=A(b),a=c.target;if(!c.target||!c.trigger||c.isDisabled){return}y(b,a)})})})(jQuery);ep.registerInstance("ep.controller.CollapsibleController","ep.base.Controller",{containers:[],stateManager:null,openClass:"-open",closeClass:"-closed",toggleClass:"-toggle",containerClass:"collapsible",onDomLoad:function(){this.initContainers();if(this.containers.length){this.initStateManager();this.setEvents()}},initContainers:function(){this.containers=jQuery("."+this.containerClass)},initStateManager:function(){var b=ep.getInstance("ep.manager.ClientStateManager");if(!b){jQuery(document).bind("ep_manager_ClientStateManager_ready",jQuery.proxy(this.onStateManagerReady,this))}else{this.stateManager=b}},onStateManagerReady:function(b){this.stateManager=b.memo},setEvents:function(){this.containers.each(jQuery.proxy(function(d,c){jQuery(c).click(jQuery.proxy(function(a){this.containerClickHandler(a,c)},this));this.setToggleMessage(c)},this))},containerClickHandler:function(f,e){var d=jQuery(f.target);if(d.hasClass(this.containerClass+this.toggleClass)){f.preventDefault();this.toggle(e)}},toggle:function(c){jQuery(document.body).toggleClass(c.id+this.openClass);jQuery(document.body).toggleClass(c.id+this.closeClass);var d=this.getIsOpen(c);jQuery(c).trigger({type:"collapsible_toggled",data:{state:d}});this.setToggleMessage(c);if(this.stateManager){this.stateManager.setBool(this.page,c,d)}jQuery(window).trigger("resize.truncation")},getIsOpen:function(b){return jQuery(document.body).hasClass(b.id+this.openClass)},setToggleMessage:function(c){if(ep.messages[c.id+this.openClass]&&ep.messages[c.id+this.closeClass]){var d=this.getIsOpen(c);jQuery(c).find("."+this.containerClass+this.toggleClass).each(jQuery.proxy(function(a,b){b.title=ep.messages[c.id+(d?this.openClass:this.closeClass)]},this))}}});(function(h){ep.register("ep.controller.control.OptionsControlsDropdowns");var e=ep.controller.control.OptionsControlsDropdowns;var g=function(a){a.addClass("active")};var f=function(a){a.removeClass("active")};e.init=function(){var b=h("#optionsControls"),a=b.find(".collapse-content");a.on("toggled",function(d){var p=h(this),n=p.data("trigger"),q=b,o=q.find(".collapse-toggle"),r=q.find(".collapse-content").not(p);f(o);g(n);r.hide();if(!p.is(":visible")){f(n.add(o))}});h(".dd-menu").hover(function(d){var j=h(this);if(d.type==="mouseleave"){j.removeClass("hover")}else{j.addClass("hover")}});h(".dd-menu").on("focus",function(){var d=h(this);d.addClass("hover")});h(".dd-menu").on("blur",function(){var d=h(this);d.removeClass("hover")});var c=h("#alertSaveShareWrapper");if(c.length>0){c.find(".add-all-side").on("click",function(){setTimeout(function(){c.trigger("toggleVisibility")},1500)})}}})(jQuery);/*! http://mths.be/placeholder v2.0.7 by @mathias */
(function(r,p,u){var x="placeholder" in p.createElement("input"),t="placeholder" in p.createElement("textarea"),o=u.fn,v=u.valHooks,m,n;if(x&&t){n=o.placeholder=function(){return this};n.input=n.textarea=true}else{n=o.placeholder=function(){var a=this;a.filter((x?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":w,"blur.placeholder":s}).data("placeholder-enabled",true).trigger("blur.placeholder");return a};n.input=x;n.textarea=t;m={get:function(b){var a=u(b);return a.data("placeholder-enabled")&&a.hasClass("placeholder")?"":b.value},set:function(c,b){var a=u(c);if(!a.data("placeholder-enabled")){return c.value=b}if(b==""){c.value=b;if(c!=p.activeElement){s.call(c)}}else{if(a.hasClass("placeholder")){w.call(c,true,b)||(c.value=b)}else{c.value=b}}return a}};x||(v.input=m);t||(v.textarea=m);u(function(){u(p).delegate("form","submit.placeholder",function(){var a=u(".placeholder",this).each(w);setTimeout(function(){a.each(s)},10)})});u(r).bind("beforeunload.placeholder",function(){u(".placeholder").each(function(){this.value=""})})}function q(c){var a={},b=/^jQuery\d+$/;u.each(c.attributes,function(d,e){if(e.specified&&!b.test(e.name)){a[e.name]=e.value}});return a}function w(d,c){var a=this,b=u(a);if(a.value==b.attr("placeholder")&&b.hasClass("placeholder")){if(b.data("placeholder-password")){b=b.hide().next().show().attr("id",b.removeAttr("id").data("placeholder-id"));if(d===true){return b[0].value=c}b.focus()}else{a.value="";b.removeClass("placeholder");a==p.activeElement&&a.select()}}}function s(){var b,a=this,c=u(a),f=c,d=this.id;if(a.value==""){if(a.type=="password"){if(!c.data("placeholder-textinput")){try{b=c.clone().attr({type:"text"})}catch(e){b=u("<input>").attr(u.extend(q(this),{type:"text"}))}b.removeAttr("name").data({"placeholder-password":true,"placeholder-id":d}).bind("focus.placeholder",w);c.data({"placeholder-textinput":b,"placeholder-id":d}).before(b)}c=c.removeAttr("id").hide().prev().attr("id",d).show()}c.addClass("placeholder");c[0].value=c.attr("placeholder")}else{c.removeClass("placeholder")}}}(this,document,jQuery));(function(b){if(!Modernizr.input.placeholder){b(function(){b("input, textarea").placeholder()})}})(jQuery);(function(b){if(window.XDomainRequest){jQuery.ajaxTransport(function(d){if(d.crossDomain&&d.async){if(d.timeout){d.xdrTimeout=d.timeout;delete d.timeout}var a;return{send:function(g,h){function c(l,e,f,k){a.onload=a.onerror=a.ontimeout=jQuery.noop;a=undefined;h(l,e,f,k)}a=new XDomainRequest();a.onload=function(){c(200,"OK",{text:a.responseText},"Content-Type: "+a.contentType)};a.onerror=function(){c(404,"Not Found")};a.onprogress=jQuery.noop;a.ontimeout=function(){c(0,"timeout")};a.timeout=d.xdrTimeout||Number.MAX_VALUE;a.open(d.type,d.url);a.send((d.hasContent&&d.data)||null)},abort:function(){if(a){a.onerror=jQuery.noop;a.abort()}}}}})}})(jQuery);if(!("withCredentials" in (new XMLHttpRequest()))&&!window.XDomainRequest){jQuery.ajaxPrefilter(function(d,c){if(d.crossDomain&&d.async){return"jsonp"}})};(function(c){var d={enter:13};c(function(){var a=c("[data-form-submit]");a.each(function(){var b=c(this);b.keydown(function(h){if(h.which===d.enter){var g=b.find('input[type="submit"]').first();h.preventDefault();g.click()}})})})})(jQuery);(function(b){if(!("XPathEvaluator" in window)){b.ajaxPrefilter("xml",function(a,e,f){a.xhrFields=_.extend({responseType:"msxml-document"},a.xhrFields)})}})(jQuery);if(ep.clientData.googleTagManagerId){(function(f,n,d,w,u){f[w]=f[w]||[];var l=n.getElementsByTagName(d),s=l[0],v=n.createElement(d),t=w!="dataLayer"?"&l="+w:"",i=true;v.async=true;v.src="//www.googletagmanager.com/gtm.js?id="+u+t;for(var j=0;j<l.length;j++){var x=l[j];if(x.src.indexOf(v.src)>-1){i=false;break}}if(i){f[w].push({"gtm.start":new Date().getTime(),event:"gtm.js"});s.parentNode.insertBefore(v,s)}})(window,document,"script","dataLayer",ep.clientData.googleTagManagerId)};(function(k){var i;function n(a){if(typeof a==="string"&&a.length){return a.indexOf("=")>-1?a.toQueryParams():{anchor:a}}return k.isPlainObject(a)?a:{}}function m(d){if(!d){return}var b=n(location.hash.substr(1)),c=k.isEmptyObject(b),a=location.href;d=n(d);k.extend(b,d);b="#"+k.param(b);if(b!==location.hash){ep.debug("updateHash:",d);a=location.hash.length?a.replace(/#.*/,b):a+b;location.replace(a)}ep.publish("ep:util:url:hashUpdated")}function h(a){if(!a||!k("#"+a+',[name="'+a+'"]').length){return}ep.debug("updateAnchor:",a);if(a!==i){m({anchor:a})}i=a;j(a)}function j(a){var b=k("#"+a+',[name="'+a+'"]');if(b.length){ep.publish("anchorscroll",a);ep.debug("updateScroll:",a);setTimeout(function(){if(k.isFunction(b.scrollAndExpand)){b.scrollAndExpand()}else{window.scrollTo(0,b.offset().top)}},10)}}ep.register("ep.util.url",{updateHash:m,updateAnchor:h});k('a[href^="#"]').live("click",function(a){a.preventDefault();if(this.hash&&this.hash.length){h(this.hash.substr(1).replace(/\./g,"\\."))}});function l(a){k(window).unbind("hashchange",l);ep.debug("onhashchange:",location.hash);if(location.hash){i=location.hash.substr(1).toQueryParams().anchor;h(i)}}k(window).bind("hashchange",l);k(function(){k(window).trigger("hashchange")})})(jQuery);(function(b){b(function(){var d=b('input[id$="logoLink"]'),a=ep.utilities.buildAjaxRequestPath("Search/GoToNewSearch");d.click(function(){window.top.location=a;return false})})})(jQuery);(function(b){b.extend(b.fn,{validate:function(a){if(!this.length){a&&a.debug&&window.console&&console.warn("nothing selected, can't validate, returning nothing");return}var f=b.data(this[0],"validator");if(f){return f}this.attr("novalidate","novalidate");f=new b.validator(a,this[0]);b.data(this[0],"validator",f);if(f.settings.onsubmit){var e=this.find("input, button");e.filter(".cancel").click(function(){f.cancelSubmit=true});if(f.settings.submitHandler){e.filter(":submit").click(function(){f.submitButton=this})}this.submit(function(d){if(f.settings.debug){d.preventDefault()}function c(){if(f.settings.submitHandler){if(f.submitButton){var h=b("<input type='hidden'/>").attr("name",f.submitButton.name).val(f.submitButton.value).appendTo(f.currentForm)}f.settings.submitHandler.call(f,f.currentForm);if(f.submitButton){h.remove()}return false}return true}if(f.cancelSubmit){f.cancelSubmit=false;return c()}if(f.form()){if(f.pendingRequest){f.formSubmitted=true;return false}return c()}else{f.focusInvalid();return false}})}return f},valid:function(){if(b(this[0]).is("form")){return this.validate().form()}else{var d=true;var a=b(this[0].form).validate();this.each(function(){d&=a.element(this)});return d}},removeAttrs:function(e){var a={},f=this;b.each(e.split(/\s/),function(d,c){a[c]=f.attr(c);f.removeAttr(c)});return a},rules:function(o,r){var m=this[0];if(o){var p=b.data(m.form,"validator").settings;var k=p.rules;var a=b.validator.staticRules(m);switch(o){case"add":b.extend(a,b.validator.normalizeRule(r));k[m.name]=a;if(r.messages){p.messages[m.name]=b.extend(p.messages[m.name],r.messages)}break;case"remove":if(!r){delete k[m.name];return a}var l={};b.each(r.split(/\s/),function(d,c){l[c]=a[c];delete a[c]});return l}}var n=b.validator.normalizeRules(b.extend({},b.validator.metadataRules(m),b.validator.classRules(m),b.validator.attributeRules(m),b.validator.staticRules(m)),m);if(n.required){var q=n.required;delete n.required;n=b.extend({required:q},n)}return n}});b.extend(b.expr[":"],{blank:function(a){return !b.trim(""+a.value)},filled:function(a){return !!b.trim(""+a.value)},unchecked:function(a){return !a.checked}});b.validator=function(a,d){this.settings=b.extend(true,{},b.validator.defaults,a);this.currentForm=d;this.init()};b.validator.format=function(a,d){if(arguments.length==1){return function(){var c=b.makeArray(arguments);c.unshift(a);return b.validator.format.apply(this,c)}}if(arguments.length>2&&d.constructor!=Array){d=b.makeArray(arguments).slice(1)}if(d.constructor!=Array){d=[d]}b.each(d,function(f,c){a=a.replace(new RegExp("\\{"+f+"\\}","g"),c)});return a};b.extend(b.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",validClass:"valid",errorElement:"label",focusInvalid:true,errorContainer:b([]),errorLabelContainer:b([]),onsubmit:true,ignore:":hidden",ignoreTitle:false,onfocusin:function(a,d){this.lastActive=a;if(this.settings.focusCleanup&&!this.blockFocusCleanup){this.settings.unhighlight&&this.settings.unhighlight.call(this,a,this.settings.errorClass,this.settings.validClass);this.addWrapper(this.errorsFor(a)).hide()}},onfocusout:function(a,d){if(!this.checkable(a)&&(a.name in this.submitted||!this.optional(a))){this.element(a)}},onkeyup:function(a,d){if(a.name in this.submitted||a==this.lastElement){this.element(a)}},onclick:function(a,d){if(a.name in this.submitted){this.element(a)}else{if(a.parentNode.name in this.submitted){this.element(a.parentNode)}}},highlight:function(e,a,f){if(e.type==="radio"){this.findByName(e.name).addClass(a).removeClass(f)}else{b(e).addClass(a).removeClass(f)}},unhighlight:function(e,a,f){if(e.type==="radio"){this.findByName(e.name).removeClass(a).addClass(f)}else{b(e).removeClass(a).addClass(f)}}},setDefaults:function(a){b.extend(b.validator.defaults,a)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date (ISO).",number:"Please enter a valid number.",digits:"Please enter only digits.",creditcard:"Please enter a valid credit card number.",equalTo:"Please enter the same value again.",accept:"Please enter a value with a valid extension.",maxlength:b.validator.format("Please enter no more than {0} characters."),minlength:b.validator.format("Please enter at least {0} characters."),rangelength:b.validator.format("Please enter a value between {0} and {1} characters long."),range:b.validator.format("Please enter a value between {0} and {1}."),max:b.validator.format("Please enter a value less than or equal to {0}."),min:b.validator.format("Please enter a value greater than or equal to {0}.")},autoCreateRanges:false,prototype:{init:function(){this.labelContainer=b(this.settings.errorLabelContainer);this.errorContext=this.labelContainer.length&&this.labelContainer||b(this.currentForm);this.containers=b(this.settings.errorContainer).add(this.settings.errorLabelContainer);this.submitted={};this.valueCache={};this.pendingRequest=0;this.pending={};this.invalid={};this.reset();var a=(this.groups={});b.each(this.settings.groups,function(d,c){b.each(c.split(/\s/),function(i,j){a[j]=d})});var e=this.settings.rules;b.each(e,function(d,c){e[d]=b.validator.normalizeRule(c)});function f(c){var d=b.data(this[0].form,"validator"),h="on"+c.type.replace(/^validate/,"");d.settings[h]&&d.settings[h].call(d,this[0],c)}b(this.currentForm).validateDelegate("[type='text'], [type='password'], [type='file'], select, textarea, [type='number'], [type='search'] ,[type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'] ","focusin focusout keyup",f).validateDelegate("[type='radio'], [type='checkbox'], select, option","click",f);if(this.settings.invalidHandler){b(this.currentForm).bind("invalid-form.validate",this.settings.invalidHandler)}},form:function(){this.checkForm();b.extend(this.submitted,this.errorMap);this.invalid=b.extend({},this.errorMap);if(!this.valid()){b(this.currentForm).triggerHandler("invalid-form",[this])}this.showErrors();return this.valid()},checkForm:function(){this.prepareForm();for(var a=0,d=(this.currentElements=this.elements());d[a];a++){this.check(d[a])}return this.valid()},element:function(d){d=this.validationTargetFor(this.clean(d));this.lastElement=d;this.prepareElement(d);this.currentElements=b(d);var a=this.check(d);if(a){delete this.invalid[d.name]}else{this.invalid[d.name]=true}if(!this.numberOfInvalids()){this.toHide=this.toHide.add(this.containers)}this.showErrors();return a},showErrors:function(d){if(d){b.extend(this.errorMap,d);this.errorList=[];for(var a in d){this.errorList.push({message:d[a],element:this.findByName(a)[0]})}this.successList=b.grep(this.successList,function(c){return !(c.name in d)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){if(b.fn.resetForm){b(this.currentForm).resetForm()}this.submitted={};this.lastElement=null;this.prepareForm();this.hideErrors();this.elements().removeClass(this.settings.errorClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var f=0;for(var a in e){f++}return f},hideErrors:function(){this.addWrapper(this.toHide).hide()},valid:function(){return this.size()==0},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid){try{b(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(a){}}},findLastActive:function(){var a=this.lastActive;return a&&b.grep(this.errorList,function(d){return d.element.name==a.name}).length==1&&a},elements:function(){var d=this,a={};return b(this.currentForm).find("input, select, textarea").not(":submit, :reset, :image, [disabled]").not(this.settings.ignore).filter(function(){!this.name&&d.settings.debug&&window.console&&console.error("%o has no name assigned",this);if(this.name in a||!d.objectLength(b(this).rules())){return false}a[this.name]=true;return true})},clean:function(a){return b(a)[0]},errors:function(){return b(this.settings.errorElement+"."+this.settings.errorClass,this.errorContext)},reset:function(){this.successList=[];this.errorList=[];this.errorMap={};this.toShow=b([]);this.toHide=b([]);this.currentElements=b([])},prepareForm:function(){this.reset();this.toHide=this.errors().add(this.containers)},prepareElement:function(a){this.reset();this.toHide=this.errorsFor(a)},check:function(n){n=this.validationTargetFor(this.clean(n));var j=b(n).rules();var m=false;for(var e in j){var k={method:e,parameters:j[e]};try{var a=b.validator.methods[e].call(this,n.value.replace(/\r/g,""),n,k.parameters);if(a=="dependency-mismatch"){m=true;continue}m=false;if(a=="pending"){this.toHide=this.toHide.not(this.errorsFor(n));return}if(!a){this.formatAndAdd(n,k);return false}}catch(l){this.settings.debug&&window.console&&console.log("exception occured when checking element "+n.id+", check the '"+k.method+"' method",l);throw l}}if(m){return}if(this.objectLength(j)){this.successList.push(n)}return true},customMetaMessage:function(a,e){if(!b.metadata){return}var f=this.settings.meta?b(a).metadata()[this.settings.meta]:b(a).metadata();return f&&f.messages&&f.messages[e]},customMessage:function(f,e){var a=this.settings.messages[f];return a&&(a.constructor==String?a:a[e])},findDefined:function(){for(var a=0;a<arguments.length;a++){if(arguments[a]!==undefined){return arguments[a]}}return undefined},defaultMessage:function(a,d){return this.findDefined(this.customMessage(a.name,d),this.customMetaMessage(a,d),!this.settings.ignoreTitle&&a.title||undefined,b.validator.messages[d],"<strong>Warning: No message defined for "+a.name+"</strong>")},formatAndAdd:function(h,f){var g=this.defaultMessage(h,f.method),a=/\$?\{(\d+)\}/g;if(typeof g=="function"){g=g.call(this,f.parameters,h)}else{if(a.test(g)){g=jQuery.format(g.replace(a,"{$1}"),f.parameters)}}this.errorList.push({message:g,element:h});this.errorMap[h.name]=g;this.submitted[h.name]=g},addWrapper:function(a){if(this.settings.wrapper){a=a.add(a.parent(this.settings.wrapper))}return a},defaultShowErrors:function(){for(var f=0;this.errorList[f];f++){var a=this.errorList[f];this.settings.highlight&&this.settings.highlight.call(this,a.element,this.settings.errorClass,this.settings.validClass);this.showLabel(a.element,a.message)}if(this.errorList.length){this.toShow=this.toShow.add(this.containers)}if(this.settings.success){for(var f=0;this.successList[f];f++){this.showLabel(this.successList[f])}}if(this.settings.unhighlight){for(var f=0,e=this.validElements();e[f];f++){this.settings.unhighlight.call(this,e[f],this.settings.errorClass,this.settings.validClass)}}this.toHide=this.toHide.not(this.toShow);this.hideErrors();this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return b(this.errorList).map(function(){return this.element})},showLabel:function(f,e){var a=this.errorsFor(f);if(a.length){a.removeClass(this.settings.validClass).addClass(this.settings.errorClass);a.attr("generated")&&a.html(e)}else{a=b("<"+this.settings.errorElement+"/>").attr({"for":this.idOrName(f),generated:true}).addClass(this.settings.errorClass).html(e||"");if(this.settings.wrapper){a=a.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()}if(!this.labelContainer.append(a).length){this.settings.errorPlacement?this.settings.errorPlacement(a,b(f)):a.insertAfter(f)}}if(!e&&this.settings.success){a.text("");typeof this.settings.success=="string"?a.addClass(this.settings.success):this.settings.success(a)}this.toShow=this.toShow.add(a)},errorsFor:function(d){var a=this.idOrName(d);return this.errors().filter(function(){return b(this).attr("for")==a})},idOrName:function(a){return this.groups[a.name]||(this.checkable(a)?a.name:a.id||a.name)},validationTargetFor:function(a){if(this.checkable(a)){a=this.findByName(a.name).not(this.settings.ignore)[0]}return a},checkable:function(a){return/radio|checkbox/i.test(a.type)},findByName:function(a){var d=this.currentForm;return b(document.getElementsByName(a)).map(function(f,c){return c.form==d&&c.name==a&&c||null})},getLength:function(d,a){switch(a.nodeName.toLowerCase()){case"select":return b("option:selected",a).length;case"input":if(this.checkable(a)){return this.findByName(a.name).filter(":checked").length}}return d.length},depend:function(d,a){return this.dependTypes[typeof d]?this.dependTypes[typeof d](d,a):true},dependTypes:{"boolean":function(d,a){return d},string:function(d,a){return !!b(d,a.form).length},"function":function(d,a){return d(a)}},optional:function(a){return !b.validator.methods.required.call(this,b.trim(a.value),a)&&"dependency-mismatch"},startRequest:function(a){if(!this.pending[a.name]){this.pendingRequest++;this.pending[a.name]=true}},stopRequest:function(a,d){this.pendingRequest--;if(this.pendingRequest<0){this.pendingRequest=0}delete this.pending[a.name];if(d&&this.pendingRequest==0&&this.formSubmitted&&this.form()){b(this.currentForm).submit();this.formSubmitted=false}else{if(!d&&this.pendingRequest==0&&this.formSubmitted){b(this.currentForm).triggerHandler("invalid-form",[this]);this.formSubmitted=false}}},previousValue:function(a){return b.data(a,"previousValue")||b.data(a,"previousValue",{old:null,valid:true,message:this.defaultMessage(a,"remote")})}},classRuleSettings:{required:{required:true},email:{email:true},url:{url:true},date:{date:true},dateISO:{dateISO:true},dateDE:{dateDE:true},number:{number:true},numberDE:{numberDE:true},digits:{digits:true},creditcard:{creditcard:true}},addClassRules:function(a,d){a.constructor==String?this.classRuleSettings[a]=d:b.extend(this.classRuleSettings,a)},classRules:function(f){var e={};var a=b(f).attr("class");a&&b.each(a.split(" "),function(){if(this in b.validator.classRuleSettings){b.extend(e,b.validator.classRuleSettings[this])}});return e},attributeRules:function(j){var h={};var a=b(j);for(var g in b.validator.methods){var i;if(g==="required"&&typeof b.fn.prop==="function"){i=a.prop(g)}else{i=a.attr(g)}if(i){h[g]=i}else{if(a[0].getAttribute("type")===g){h[g]=true}}}if(h.maxlength&&/-1|2147483647|524288/.test(h.maxlength)){delete h.maxlength}return h},metadataRules:function(a){if(!b.metadata){return{}}var d=b.data(a.form,"validator").settings.meta;return d?b(a).metadata()[d]:b(a).metadata()},staticRules:function(f){var e={};var a=b.data(f.form,"validator");if(a.settings.rules){e=b.validator.normalizeRule(a.settings.rules[f.name])||{}}return e},normalizeRules:function(d,a){b.each(d,function(c,g){if(g===false){delete d[c];return}if(g.param||g.depends){var h=true;switch(typeof g.depends){case"string":h=!!b(g.depends,a.form).length;break;case"function":h=g.depends.call(a,a);break}if(h){d[c]=g.param!==undefined?g.param:true}else{delete d[c]}}});b.each(d,function(f,c){d[f]=b.isFunction(c)?c(a):c});b.each(["minlength","maxlength","min","max"],function(){if(d[this]){d[this]=Number(d[this])}});b.each(["rangelength","range"],function(){if(d[this]){d[this]=[Number(d[this][0]),Number(d[this][1])]}});if(b.validator.autoCreateRanges){if(d.min&&d.max){d.range=[d.min,d.max];delete d.min;delete d.max}if(d.minlength&&d.maxlength){d.rangelength=[d.minlength,d.maxlength];delete d.minlength;delete d.maxlength}}if(d.messages){delete d.messages}return d},normalizeRule:function(d){if(typeof d=="string"){var a={};b.each(d.split(/\s/),function(){a[this]=true});d=a}return d},addMethod:function(a,e,f){b.validator.methods[a]=e;b.validator.messages[a]=f!=undefined?f:b.validator.messages[a];if(e.length<3){b.validator.addClassRules(a,b.validator.normalizeRule(a))}},methods:{required:function(h,a,f){if(!this.depend(f,a)){return"dependency-mismatch"}switch(a.nodeName.toLowerCase()){case"select":var g=b(a).val();return g&&g.length>0;case"input":if(this.checkable(a)){return this.getLength(h,a)>0}default:return b.trim(h).length>0}},remote:function(i,l,h){if(this.optional(l)){return"dependency-mismatch"}var k=this.previousValue(l);if(!this.settings.messages[l.name]){this.settings.messages[l.name]={}}k.originalMessage=this.settings.messages[l.name].remote;this.settings.messages[l.name].remote=k.message;h=typeof h=="string"&&{url:h}||h;if(this.pending[l.name]){return"pending"}if(k.old===i){return k.valid}k.old=i;var a=this;this.startRequest(l);var j={};j[l.name]=i;b.ajax(b.extend(true,{url:h,mode:"abort",port:"validate"+l.name,dataType:"json",data:j,success:function(f){a.settings.messages[l.name].remote=k.originalMessage;var d=f===true;if(d){var g=a.formSubmitted;a.prepareElement(l);a.formSubmitted=g;a.successList.push(l);a.showErrors()}else{var c={};var e=f||a.defaultMessage(l,"remote");c[l.name]=k.message=b.isFunction(e)?e(i):e;a.showErrors(c)}k.valid=d;a.stopRequest(l,d)}},h));return"pending"},minlength:function(f,a,e){return this.optional(a)||this.getLength(b.trim(f),a)>=e},maxlength:function(f,a,e){return this.optional(a)||this.getLength(b.trim(f),a)<=e},rangelength:function(g,a,f){var h=this.getLength(b.trim(g),a);return this.optional(a)||(h>=f[0]&&h<=f[1])},min:function(f,a,e){return this.optional(a)||f>=e},max:function(f,a,e){return this.optional(a)||f<=e},range:function(f,a,e){return this.optional(a)||(f>=e[0]&&f<=e[1])},email:function(d,a){return this.optional(a)||/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(d)},url:function(d,a){return this.optional(a)||/^(https?|ftp):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(\#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(d)},date:function(d,a){return this.optional(a)||!/Invalid|NaN/.test(new Date(d))},dateISO:function(d,a){return this.optional(a)||/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(d)},number:function(d,a){return this.optional(a)||/^-?(?:\d+|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(d)},digits:function(d,a){return this.optional(a)||/^\d+$/.test(d)},creditcard:function(k,n){if(this.optional(n)){return"dependency-mismatch"}if(/[^0-9 -]+/.test(k)){return false}var j=0,l=0,a=false;k=k.replace(/\D/g,"");for(var i=k.length-1;i>=0;i--){var m=k.charAt(i);var l=parseInt(m,10);if(a){if((l*=2)>9){l-=9}}j+=l;a=!a}return(j%10)==0},accept:function(f,a,e){e=typeof e=="string"?e.replace(/,/g,"|"):"png|jpe?g|gif";return this.optional(a)||f.match(new RegExp(".("+e+")$","i"))},equalTo:function(h,a,f){var g=b(f).unbind(".validate-equalTo").bind("blur.validate-equalTo",function(){b(a).valid()});return h==g.val()}}});b.format=b.validator.format})(jQuery);(function(f){var e={};if(f.ajaxPrefilter){f.ajaxPrefilter(function(b,c,a){var h=b.port;if(b.mode=="abort"){if(e[h]){e[h].abort()}e[h]=a}})}else{var d=f.ajax;f.ajax=function(b){var a=("mode" in b?b:f.ajaxSettings).mode,c=("port" in b?b:f.ajaxSettings).port;if(a=="abort"){if(e[c]){e[c].abort()}return(e[c]=d.apply(this,arguments))}return d.apply(this,arguments)}}})(jQuery);(function(b){if(!jQuery.event.special.focusin&&!jQuery.event.special.focusout&&document.addEventListener){b.each({focus:"focusin",blur:"focusout"},function(f,a){b.event.special[a]={setup:function(){this.addEventListener(f,e,true)},teardown:function(){this.removeEventListener(f,e,true)},handler:function(c){arguments[0]=b.event.fix(c);arguments[0].type=a;return b.event.handle.apply(this,arguments)}};function e(c){c=b.event.fix(c);c.type=a;return b.event.handle.call(this,c)}})}b.extend(b.fn,{validateDelegate:function(e,f,a){return this.bind(f,function(d){var c=b(d.target);if(c.is(e)){return a.apply(c,arguments)}})}})})(jQuery);(function(b){b(function(){ep.require("jquery/plugins/jquery.validate-1.9.0.js",function(){jQuery.validator.addMethod("multiemail",function(f,g){if(this.optional(g)){return true}var a;var h=f.split(new RegExp("\\s*;\\s*","gi"));isValid=true;for(a in h){if(h.hasOwnProperty(a)){isValid=isValid&&jQuery.validator.methods.email.call(this,h[a],g)}}return isValid},(ep.messages.email_invalid_error)?ep.messages.email_invalid_error:"Please enter a valid email address.");b.validator.addMethod("html",function(d,a){return !/(<([^>]+)>)/ig.test(d)});b.validator.addMethod("followsDateFormat",function(f,a,e){if(!f){return true}if(ep.utilities.getDateObj(f,e)){return true}return false})})})})(jQuery);(function(b){b.fn.cleanWhitespace=function(){this.contents().filter(function(){return(this.nodeType===3&&!/\S/.test(this.nodeValue))}).remove();return this}})(jQuery);